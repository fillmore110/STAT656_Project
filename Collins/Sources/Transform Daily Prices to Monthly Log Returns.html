<!DOCTYPE html>
<!-- saved from url=(0093)https://www.linkedin.com/pulse/transform-daily-prices-monthly-log-returns-jonathan-regenstein -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="pageKey" content="d_flagship2_pulse_read"><meta name="linkedin:pageTag" content="old=index;premium=index"><meta name="locale" content="en_US"><meta id="config" data-app-id="" data-custom-tracking-code="" data-tracking-page-type="" data-jet-tags="" data-multiproduct-name="" data-service-name="" data-app-version=""><meta id="google-analytics-config" data-use-location-for-dp="" data-use-page-title=""><link rel="canonical" href="https://www.linkedin.com/pulse/transform-daily-prices-monthly-log-returns-jonathan-regenstein"><link rel="manifest" href="https://www.linkedin.com/homepage-guest/manifest.json" crossorigin="use-credentials"><link rel="icon" href="https://static-exp1.licdn.com/sc/h/al2o9zrvru7aqj8e1x2rzsrca"><script async="" src="./Transform Daily Prices to Monthly Log Returns_files/analytics.js.download"></script><script>function getDfd() {let yFn,nFn;const p=new Promise((y, n)=>{yFn=y;nFn=n;});p.resolve=yFn;p.reject=nFn;return p;}window.lazyloader = getDfd();window.tracking = getDfd();window.impressionTracking = getDfd();window.pemTracking = getDfd();window.ingraphTracking = getDfd();window.appDetection = getDfd();</script><title>Transform Daily Prices to Monthly Log Returns</title><meta name="robots" content="noarchive"><meta name="description" content="Today, we go back a bit, back to where we probably should have started in the first place, but it wouldn’t have been as much fun. In our previous work on volatility, we zipped through the steps of importing data and transforming to monthly returns."><meta name="google-site-verification" content="t9M-lk-kbgtImg1_i_dtbW8DnGO0ZEzvRHHv7pcJoZA"><meta property="og:title" content="Transform Daily Prices to Monthly Log Returns"><meta property="og:description" content="Today, we go back a bit, back to where we probably should have started in the first place, but it wouldn’t have been as much fun. In our previous work on volatility, we zipped through the steps of importing data and transforming to monthly returns."><meta property="og:image" content="https://media-exp1.licdn.com/dms/image/C5112AQGvOh4uUOdyGA/article-cover_image-shrink_600_2000/0/1520103027263?e=1622073600&amp;v=beta&amp;t=MlAp9mBNwZSvEMcDd-VB3mnbm8P70URxAZr3nKwlykg"><meta property="og:url" content="https://www.linkedin.com/pulse/transform-daily-prices-monthly-log-returns-jonathan-regenstein"><meta property="og:type" content="website"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@LinkedInEditors"><meta name="twitter:title" content="Transform Daily Prices to Monthly Log Returns"><meta name="twitter:description" content="Today, we go back a bit, back to where we probably should have started in the first place, but it wouldn’t have been as much fun. In our previous work on volatility, we zipped through the steps of importing data and transforming to monthly returns."><meta name="fb:app_id" content="161320853908703"><meta name="clientSideIngraphs" content="1" data-gauge-metric-endpoint="/content-guest/api/ingraphs/gauge" data-counter-metric-endpoint="/content-guest/api/ingraphs/counter"><link rel="stylesheet" href="./Transform Daily Prices to Monthly Log Returns_files/4z7dkfyyoeydbsp10prgb7kqb"><style type="text/css">
:root .adblock
{ display: none !important; }</style><style id="googleidentityservice_button_styles">.qJTHM{-webkit-user-select:none;color:#202124;direction:ltr;-webkit-touch-callout:none;font-family:'Roboto-Regular',arial,sans-serif;-webkit-font-smoothing:antialiased;font-weight:400;margin:0;overflow:hidden;-webkit-text-size-adjust:100%}.ynRLnc{left:-9999px;position:absolute;top:-9999px}.L6cTce{display:none}.bltWBb{word-break:break-all}.hSRGPd{color:#1a73e8;cursor:pointer;font-weight:500;text-decoration:none}.Bz112c-W3lGp{height:16px;width:16px}.Bz112c-E3DyYd{height:20px;width:20px}.Bz112c-r9oPif{height:24px;width:24px}.Bz112c-uaxL4e{-webkit-border-radius:10px;border-radius:10px}.LgbsSe-Bz112c{display:block}.S9gUrf-YoZ4jf,.S9gUrf-YoZ4jf *{border:none;margin:0;padding:0}.fFW7wc-ibnC6b>.aZ2wEe>div{border-color:#4285f4}.P1ekSe-ZMv3u>div:nth-child(1){background-color:#1a73e8!important}.P1ekSe-ZMv3u>div:nth-child(2),.P1ekSe-ZMv3u>div:nth-child(3){background-image:linear-gradient(to right,rgba(255,255,255,0.7),rgba(255,255,255,0.7)),linear-gradient(to right,#1a73e8,#1a73e8)!important}.haAclf{display:inline-block}.nsm7Bb-HzV7m-LgbsSe{-webkit-border-radius:4px;border-radius:4px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transition:background-color .218s,border-color .218s;transition:background-color .218s,border-color .218s;-webkit-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;border:1px solid #dadce0;color:#3c4043;cursor:pointer;font-family:'Google Sans',arial,sans-serif;font-size:14px;height:40px;letter-spacing:.25px;outline:none;overflow:hidden;padding:0 12px;position:relative;text-align:center;vertical-align:middle;white-space:nowrap;width:auto}@media screen and (-ms-high-contrast:active){.nsm7Bb-HzV7m-LgbsSe{border:2px solid windowText;color:windowText}}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe{font-size:14px;height:32px;letter-spacing:.25px;padding:0 10px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe{font-size:11px;height:20px;letter-spacing:.3px;padding:0 8px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe{padding:0;width:40px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.pSzOP-SxQuSe{width:32px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.purZT-SxQuSe{width:20px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK{-webkit-border-radius:20px;border-radius:20px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK.pSzOP-SxQuSe{-webkit-border-radius:16px;border-radius:16px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK.purZT-SxQuSe{-webkit-border-radius:10px;border-radius:10px}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc{border:none;color:#fff}.nsm7Bb-HzV7m-LgbsSe.MFS4be-v3pZbf-Ia7Qfc{background-color:#1a73e8}.nsm7Bb-HzV7m-LgbsSe.MFS4be-JaPV2b-Ia7Qfc{background-color:#202124;color:#e8eaed}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:18px;margin-right:8px;min-width:18px;width:18px}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:14px;min-width:14px;width:14px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:10px;min-width:10px;width:10px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin-left:8px;margin-right:-4px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin:0;padding:10px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{padding:8px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{padding:4px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-top-left-radius:3px;border-top-left-radius:3px;-webkit-border-bottom-left-radius:3px;border-bottom-left-radius:3px;display:-webkit-box;display:-webkit-flex;display:flex;justify-content:center;-webkit-align-items:center;align-items:center;background-color:#fff;height:36px;margin-left:-10px;margin-right:12px;min-width:36px;width:36px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf .nsm7Bb-HzV7m-LgbsSe-Bz112c,.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin:0;padding:0}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{height:28px;margin-left:-8px;margin-right:10px;min-width:28px;width:28px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{height:16px;margin-left:-6px;margin-right:8px;min-width:16px;width:16px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:3px;border-radius:3px;margin-left:2px;margin-right:0;padding:0}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:18px;border-radius:18px}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:14px;border-radius:14px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:8px;border-radius:8px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-bN97Pc-sM5MNb{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-flex-direction:row;flex-direction:row;justify-content:space-between;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;height:100%;position:relative;width:100%}.nsm7Bb-HzV7m-LgbsSe .oXtfBe-l4eHX{justify-content:center}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-BPrWId{-webkit-flex-grow:1;flex-grow:1;font-family:'Google Sans',arial,sans-serif;font-weight:500;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-BPrWId{font-weight:300}.nsm7Bb-HzV7m-LgbsSe .oXtfBe-l4eHX .nsm7Bb-HzV7m-LgbsSe-BPrWId{-webkit-flex-grow:0;flex-grow:0}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-MJoBVe{-webkit-transition:background-color .218s;transition:background-color .218s;bottom:0;left:0;position:absolute;right:0;top:0}.nsm7Bb-HzV7m-LgbsSe:hover,.nsm7Bb-HzV7m-LgbsSe:focus{-webkit-box-shadow:none;box-shadow:none;border-color:#d2e3fc;outline:none}.nsm7Bb-HzV7m-LgbsSe:hover .nsm7Bb-HzV7m-LgbsSe-MJoBVe,.nsm7Bb-HzV7m-LgbsSe:focus .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(66,133,244,0.04)}.nsm7Bb-HzV7m-LgbsSe:active .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(66,133,244,0.1)}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:hover .nsm7Bb-HzV7m-LgbsSe-MJoBVe,.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:focus .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(255,255,255,0.24)}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:active .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(255,255,255,0.32)}.nsm7Bb-HzV7m-LgbsSe .n1UuX-DkfjY{-webkit-border-radius:50%;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:flex;height:20px;margin-left:-4px;margin-right:8px;min-width:20px;width:20px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId{font-family:'Roboto';font-size:12px;text-align:left}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .ssJRIf,.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff .fmcmS{overflow:hidden;text-overflow:ellipsis}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;color:#5f6368;fill:#5f6368;font-size:11px;font-weight:400}.nsm7Bb-HzV7m-LgbsSe.jVeSEe.MFS4be-Ia7Qfc .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff{color:#e8eaed;fill:#e8eaed}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff .Bz112c{height:18px;margin:-3px -3px -3px 2px;min-width:18px;width:18px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-top-left-radius:0;border-top-left-radius:0;-webkit-border-bottom-left-radius:0;border-bottom-left-radius:0;-webkit-border-top-right-radius:3px;border-top-right-radius:3px;-webkit-border-bottom-right-radius:3px;border-bottom-right-radius:3px;margin-left:12px;margin-right:-10px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{-webkit-border-radius:18px;border-radius:18px}.L5Fo6c-sM5MNb{border:0;display:block;left:0;position:relative;top:0}.L5Fo6c-bF1uUb{-webkit-border-radius:4px;border-radius:4px;bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0}.L5Fo6c-bF1uUb:focus{border:none;outline:none}sentinel{}
/*# sourceURL=/_/gsi/_/ss/k=gsi.gsi.n64yMIEPTMo.L.W.O/am=cg/d=1/ct=zgms/rs=AF0KOtV4Ub2H8p50TbLsIBxnE82DWYYB8g/m=gis_client_button_style */</style><link id="googleidentityservice" type="text/css" media="all" rel="stylesheet" href="./Transform Daily Prices to Monthly Log Returns_files/style"></head><body><form class="google-one-tap" action="https://www.linkedin.com/uas/login-submit" method="post"><input type="hidden" name="loginCsrfParam" value="8f439bdb-3899-4ac1-83e8-f0b89e4fbacc"><input type="hidden" name="session_redirect" value="https://www.linkedin.com/today/author/jkregenstein"><input type="hidden" name="trk" value="article_google-one-tap-submit"><div id="google-one-tap__container" class="google-one-tap__container" data-tracking-control-name="article_google-one-tap"></div><div class="loader loader--full-screen"><div class="loader__container"><icon class="loader__icon loader__icon--default lazy-loaded" data-svg-class-name="loader__icon-svg--large" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60" width="60" height="60" focusable="false" class="loader__icon-svg--large lazy-loaded">
  <g>
    <path opacity="1" d="M30.1,16.1L30.1,16.1c-0.6,0-1-0.5-1-1V1c0-0.6,0.5-1,1-1l0,0c0.6,0,1,0.5,1,1v14.1C31.1,15.7,30.6,16.1,30.1,16.1z"></path>
    <path opacity="0.85" d="M23.1,18.1L23.1,18.1c-0.5,0.3-1.1,0.1-1.4-0.4L14.5,5.6c-0.3-0.5-0.2-1.1,0.4-1.4l0,0C15.4,3.9,16,4,16.3,4.6l7.2,12.1C23.8,17.2,23.6,17.8,23.1,18.1z"></path>
    <path opacity="0.77" d="M17.9,23.1L17.9,23.1c-0.3,0.5-0.9,0.7-1.4,0.4l-12.2-7c-0.5-0.3-0.7-0.9-0.4-1.4l0,0c0.3-0.5,0.9-0.7,1.4-0.4l12.2,7C18,22,18.2,22.7,17.9,23.1z"></path>
    <path opacity="0.69" d="M16.1,30.1L16.1,30.1c0,0.6-0.5,1-1,1L1,31.2c-0.6,0-1-0.5-1-1l0,0c0-0.6,0.5-1,1-1l14.1-0.1C15.7,29.1,16.1,29.5,16.1,30.1z"></path>
    <path opacity="0.61" d="M18,36.9L18,36.9c0.3,0.5,0.2,1.1-0.4,1.4L5.5,45.6c-0.5,0.3-1.1,0.2-1.4-0.4l0,0c-0.3-0.5-0.2-1.1,0.4-1.4l12.1-7.3C17.1,36.2,17.7,36.4,18,36.9z"></path>
    <path opacity="0.53" d="M23.3,42.1L23.3,42.1c0.5,0.3,0.6,0.9,0.4,1.4l-7.3,12.1c-0.3,0.5-0.9,0.6-1.4,0.4l0,0c-0.5-0.3-0.6-0.9-0.4-1.4l7.3-12.1C22.1,41.9,22.8,41.8,23.3,42.1z"></path>
    <path opacity="0.45" d="M30.1,43.9L30.1,43.9c0.6,0,1,0.5,1,1V59c0,0.6-0.5,1-1,1l0,0c-0.6,0-1-0.5-1-1V44.9C29,44.4,29.5,43.9,30.1,43.9z"></path>
    <path opacity="0.37" d="M37,41.9L37,41.9c0.5-0.3,1.1-0.2,1.4,0.4l7.2,12.1c0.3,0.5,0.2,1.1-0.4,1.4l0,0c-0.5,0.3-1.1,0.2-1.4-0.4l-7.2-12.1C36.4,42.8,36.6,42.2,37,41.9z"></path>
    <path opacity="0.29" d="M42.2,36.8L42.2,36.8c0.3-0.5,0.9-0.7,1.4-0.4l12.2,7c0.5,0.3,0.7,0.9,0.4,1.4l0,0c-0.3,0.5-0.9,0.7-1.4,0.4l-12.2-7C42.1,38,41.9,37.4,42.2,36.8z"></path>
    <path opacity="0.21 " d="M44,29.9L44,29.9c0-0.6,0.5-1,1-1h14.1c0.6,0,1,0.5,1,1l0,0c0,0.6-0.5,1-1,1L45,31C44.4,31,44,30.5,44,29.9z"></path>
    <path opacity="0.13" d="M42.1,23.1L42.1,23.1c-0.3-0.5-0.2-1.1,0.4-1.4l12.1-7.3c0.5-0.3,1.1-0.2,1.4,0.4l0,0c0.3,0.4,0.1,1.1-0.4,1.3l-12.1,7.3C43.1,23.7,42.4,23.6,42.1,23.1z"></path>
    <path opacity="0.05" d="M36.9,17.9L36.9,17.9c-0.5-0.3-0.6-0.9-0.4-1.4l7.3-12.1c0.3-0.5,0.9-0.6,1.4-0.4l0,0c0.5,0.3,0.6,0.9,0.4,1.4l-7.4,12.2C38,18.1,37.3,18.2,36.9,17.9z"></path>
    <animatetransform attributeName="transform" attributeType="XML" type="rotate" begin="0s" dur="1s" repeatCount="indefinite" calcMode="discrete" keyTimes="0;.0833;.166;.25;.3333;.4166;.5;.5833;.6666;.75;.8333;.9166;1" values="0,30,30;30,30,30;60,30,30;90,30,30;120,30,30;150,30,30;180,30,30;210,30,30;240,30,30;270,30,30;300,30,30;330,30,30;360,30,30"></animatetransform>
  </g>
</svg></icon></div></div><input type="hidden" name="controlId" value="d_flagship2_pulse_read-article_google-one-tap"><input type="hidden" name="pageInstance" value="urn:li:page:d_flagship2_pulse_read_jsbeacon;pozOHXocTsqgSo59PsVr3A=="></form><header class="navbar global-alert-offset" style="height:64px"><div class="navbar__wrapper "><a data-tracking-control-name="d_flagship2_pulse_read_logo" data-tracking-will-navigate="" href="https://www.linkedin.com/?trk=d_flagship2_pulse_read_logo" class="nav-header__logo-link" aria-label="LinkedIn"><icon class="nav-header__logo-icon lazy-loaded" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 84 21" preserveAspectRatio="xMinYMin meet" version="1.1" focusable="false" class="lazy-loaded">
  <g class="inbug" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
    <path d="M19.479,0 L1.583,0 C0.727,0 0,0.677 0,1.511 L0,19.488 C0,20.323 0.477,21 1.333,21 L19.229,21 C20.086,21 21,20.323 21,19.488 L21,1.511 C21,0.677 20.336,0 19.479,0" class="bug-text-color" transform="translate(63.000000, 0.000000)"></path>
    <path d="M82.479,0 L64.583,0 C63.727,0 63,0.677 63,1.511 L63,19.488 C63,20.323 63.477,21 64.333,21 L82.229,21 C83.086,21 84,20.323 84,19.488 L84,1.511 C84,0.677 83.336,0 82.479,0 Z M71,8 L73.827,8 L73.827,9.441 L73.858,9.441 C74.289,8.664 75.562,7.875 77.136,7.875 C80.157,7.875 81,9.479 81,12.45 L81,18 L78,18 L78,12.997 C78,11.667 77.469,10.5 76.227,10.5 C74.719,10.5 74,11.521 74,13.197 L74,18 L71,18 L71,8 Z M66,18 L69,18 L69,8 L66,8 L66,18 Z M69.375,4.5 C69.375,5.536 68.536,6.375 67.5,6.375 C66.464,6.375 65.625,5.536 65.625,4.5 C65.625,3.464 66.464,2.625 67.5,2.625 C68.536,2.625 69.375,3.464 69.375,4.5 Z" class="background" fill="currentColor"></path>
  </g>
  <g class="linkedin-text">
    <path d="M60,18 L57.2,18 L57.2,16.809 L57.17,16.809 C56.547,17.531 55.465,18.125 53.631,18.125 C51.131,18.125 48.978,16.244 48.978,13.011 C48.978,9.931 51.1,7.875 53.725,7.875 C55.35,7.875 56.359,8.453 56.97,9.191 L57,9.191 L57,3 L60,3 L60,18 Z M54.479,10.125 C52.764,10.125 51.8,11.348 51.8,12.974 C51.8,14.601 52.764,15.875 54.479,15.875 C56.196,15.875 57.2,14.634 57.2,12.974 C57.2,11.268 56.196,10.125 54.479,10.125 L54.479,10.125 Z" fill="currentColor"></path>
    <path d="M47.6611,16.3889 C46.9531,17.3059 45.4951,18.1249 43.1411,18.1249 C40.0001,18.1249 38.0001,16.0459 38.0001,12.7779 C38.0001,9.8749 39.8121,7.8749 43.2291,7.8749 C46.1801,7.8749 48.0001,9.8129 48.0001,13.2219 C48.0001,13.5629 47.9451,13.8999 47.9451,13.8999 L40.8311,13.8999 L40.8481,14.2089 C41.0451,15.0709 41.6961,16.1249 43.1901,16.1249 C44.4941,16.1249 45.3881,15.4239 45.7921,14.8749 L47.6611,16.3889 Z M45.1131,11.9999 C45.1331,10.9449 44.3591,9.8749 43.1391,9.8749 C41.6871,9.8749 40.9121,11.0089 40.8311,11.9999 L45.1131,11.9999 Z" fill="currentColor"></path>
    <polygon fill="currentColor" points="38 8 34.5 8 31 12 31 3 28 3 28 18 31 18 31 13 34.699 18 38.241 18 34 12.533"></polygon>
    <path d="M16,8 L18.827,8 L18.827,9.441 L18.858,9.441 C19.289,8.664 20.562,7.875 22.136,7.875 C25.157,7.875 26,9.792 26,12.45 L26,18 L23,18 L23,12.997 C23,11.525 22.469,10.5 21.227,10.5 C19.719,10.5 19,11.694 19,13.197 L19,18 L16,18 L16,8 Z" fill="currentColor"></path>
    <path d="M11,18 L14,18 L14,8 L11,8 L11,18 Z M12.501,6.3 C13.495,6.3 14.3,5.494 14.3,4.5 C14.3,3.506 13.495,2.7 12.501,2.7 C11.508,2.7 10.7,3.506 10.7,4.5 C10.7,5.494 11.508,6.3 12.501,6.3 Z" fill="currentColor"></path>
    <polygon fill="currentColor" points="3 3 0 3 0 18 9 18 9 15 3 15"></polygon>
  </g>
</svg></icon></a><nav class="nav-header__guest-nav" aria-label="Primary"><ul class="nav-header__link-list"><li class="nav-header__link-item"><a class="nav-header__link" data-tracking-control-name="d_flagship2_pulse_read_join" data-tracking-will-navigate="" href="https://www.linkedin.com/signup/cold-join?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein&amp;trk=d_flagship2_pulse_read_join" rel="nofollow">Join now</a></li><li class="nav-header__link-item"><a class="nav-header__link-button" data-tracking-control-name="d_flagship2_pulse_read_signin" data-tracking-will-navigate="" href="https://www.linkedin.com/login?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein&amp;trk=d_flagship2_pulse_read_signin">Sign in</a></li></ul></nav></div></header><figure class="article-cover-image"><img alt="Transform Daily Prices to Monthly Log Returns" class="article-cover-image-default article-cover-image-small lazy-loaded" src="./Transform Daily Prices to Monthly Log Returns_files/1520103027263"></figure><div class="article-cover-image__caption"><figcaption itemprop="caption">Where we're headed: vis of monthly log returns</figcaption></div><article class="main single-col-grid article-grid"><header class="article-head"><h1 class="article-title">Transform Daily Prices to Monthly Log Returns</h1><time class="article-head__timestamp">Published on September 26, 2017</time><time class="article-head__mobile-timestamp">September 26, 2017&nbsp;•&nbsp;32&nbsp;Likes&nbsp;•&nbsp;4 Comments</time><div class="ellipsis-menu"><div class="collapsible-dropdown article-head__ellipsis-menu"><button class="ellipsis-menu__trigger collapsible-dropdown__button" aria-label="Open menu" aria-expanded="false" data-tracking-control-name="article-head_ellipsis-menu-trigger"><icon class="ellipsis-menu__trigger-icon lazy-loaded" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" id="ellipsis-horizontal-large" data-supported-dps="24x24" fill="currentColor" focusable="false" class="lazy-loaded">
  <path d="M2 10h4v4H2v-4zm8 4h4v-4h-4v4zm8-4v4h4v-4h-4z"></path>
</svg></icon></button><ul class="collapsible-dropdown__list article-head__ellipsis-menu__list hidden" role="menu" tabindex="-1"><li class="ellipsis-menu__item"><a href="https://www.linkedin.com/login?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein&amp;trk=article-head_ellipsis-menu-sign-in-redirect" class="ellipsis-menu__item-button" data-tracking-control-name="article-head_ellipsis-menu-sign-in-redirect" data-tracking-will-navigate=""><icon class="ellipsis-menu__item-icon lazy-loaded" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" id="flag-large" data-supported-dps="24x24" fill="currentColor" focusable="false" class="lazy-loaded">
  <path d="M13.82 5L14 4a1 1 0 00-1-1H5V2H3v20h2v-7h4.18L9 16a1 1 0 001 1h8.87L21 5h-7.18zM5 13V5h6.94l-1.41 8H5zm12.35 2h-6.3l1.42-8h6.29z"></path>
</svg></icon>Report this post</a></li></ul></div></div><div class="author-info"><div class="mini-card mini-profile mini-card--flat mini-profile--flat"><img class="mini-card__image mini-profile__image mini-card__image--flat mini-profile__image--flat lazy-loaded" alt="Jonathan Regenstein" src="./Transform Daily Prices to Monthly Log Returns_files/244xhbkr7g40x6bsu4gi6q4ry"><section class="mini-card__content mini-profile__content mini-card__content--flat mini-profile__content--flat"><h3 class="mini-card__title mini-profile__title mini-card__title--flat mini-profile__title--flat"><a class="mini-card__title-link mini-profile__title-link mini-card__title-link--flat mini-profile__title-link--flat" data-tracking-control-name="author_mini-profile_title" data-tracking-will-navigate="" href="https://www.linkedin.com/in/jkregenstein?trk=author_mini-profile_title" aria-label="View profile for Jonathan Regenstein">Jonathan Regenstein</a><a class="author-info__follow-button" data-tracking-will-navigate="" data-tracking-control-name="author-info__follow-button" href="https://www.linkedin.com/login?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein&amp;trk=author-info__follow-button">Follow</a></h3><h4 class="mini-card__subtitle mini-profile__subtitle mini-card__subtitle--flat mini-profile__subtitle--flat">Head of Data and Quantamental Research at Truist Securities</h4></section></div><ul class="social-ctas"><li class="social-ctas__list-item"><button class="button-secondary-medium-round-muted social-ctas__button social-ctas__like-button" type="button" data-tracking-control-name="urn:li:control:d_flagship3_pulse_read-like"><li-icon aria-hidden="true" type="like-icon" class="social-ctas__button-icon"></li-icon>Like</button><span class="social-ctas__number">32</span></li><li class="social-ctas__list-item"><button class="button-secondary-medium-round-muted social-ctas__button social-ctas__comment-button" type="button" data-tracking-control-name="urn:li:control:d_flagship3_pulse_read-comment_intent"><li-icon aria-hidden="true" type="comment-icon" class="social-ctas__button-icon"></li-icon>Comment</button><span class="social-ctas__number">4</span></li><li class="social-ctas__list-item"><div data-tracking-control-name="social_share" data-share-message="Transform Daily Prices to Monthly Log Returns" class="social-share social-ctas__button"><input type="checkbox" role="button" class="social-share__state autoclose" data-no-close-selector=".share__list" aria-label="Show share options" aria-expanded="false" data-show-dialog-string="Show share options" data-hide-dialog-string="Hide share options" id="social-share__state-social-share-article"><label for="social-share__state-social-share-article" class="social-share__button social-share__button-circular"><icon class="social-share__button-icon background lazy-loaded"></icon><span class="social-share__button-text-circular">Share</span></label><ul class="social-share__options social-share__list social-share__list--bottom-left" id="social-share__dropdown"><li><button data-tracking-control-name="social_share_linkedin" class="social-share__item" data-share-service="linkedin"><icon class="social-share__item-icon lazy-loaded" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="24px" height="24px" version="1.1" preserveAspectRatio="xMinYMin meet" focusable="false" class="lazy-loaded">
      <g>
        <rect x="2.997" y="3" style="fill:#FFFFFF;" width="18" height="18"></rect>
        <g>
          <rect x="-0.003" style="fill:none;" width="24" height="24"></rect>
          <path style="fill:currentColor;" d="M20,2h-16c-1.1,0-2,0.9-2,2v16c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V4C22,2.9,21.1,2,20,2zM8,19h-3v-9h3V19zM6.5,8.8C5.5,8.8,4.7,8,4.7,7s0.8-1.8,1.8-1.8S8.3,6,8.3,7S7.5,8.8,6.5,8.8zM19,19h-3v-4c0-1.4-0.6-2-1.5-2c-1.1,0-1.5,0.8-1.5,2.2V19h-3v-9h2.9v1.1c0.5-0.7,1.4-1.3,2.6-1.3c2.3,0,3.5,1.1,3.5,3.7V19z"></path>
        </g>
      </g>
</svg></icon><span class="social-share__item-text">LinkedIn</span></button></li><li><button data-tracking-control-name="social_share_facebook" class="social-share__item" data-share-service="facebook"><icon class="social-share__item-icon lazy-loaded" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" version="1.1" focusable="false" class="lazy-loaded">
  <defs id="ui-icons">
    <svg id="facebook-icon" viewBox="0 0 24 24" width="24px" height="24px" x="0" y="0" preserveAspectRatio="xMinYMin meet" class="artdeco-icon">
      <g class="color-icon">
        <g>
          <rect x="3" y="3" style="fill:#FFFFFF;" width="18" height="18"></rect>
          <g>
            <rect style="fill:none;" width="24" height="24"></rect>
            <path style="fill:#1c74f4;" d="M 10.570312 0.0546875 C 6.5625 0.507812 2.914062 3.113281 1.167969 6.773438 C -1.988281 13.390625 1.375 21.214844 8.332031 23.453125 C 8.847656 23.621094 9.847656 23.859375 10.023438 23.859375 L 10.125 23.859375 L 10.125 15.46875 L 7.078125 15.46875 L 7.078125 12 L 10.125 12 L 10.125 10.320312 C 10.125 8.457031 10.15625 8.152344 10.410156 7.425781 C 10.910156 5.992188 11.960938 5.09375 13.5 4.78125 C 14.226562 4.632812 16.722656 4.710938 17.285156 4.898438 C 17.332031 4.914062 17.34375 5.253906 17.34375 6.390625 L 17.34375 7.859375 L 16.347656 7.886719 C 14.175781 7.949219 13.878906 8.320312 13.875 10.957031 L 13.875 12 L 15.539062 12 C 17 12 17.203125 12.007812 17.203125 12.070312 C 17.203125 12.148438 16.75 15.128906 16.707031 15.339844 L 16.679688 15.46875 L 13.875 15.46875 L 13.875 23.859375 L 13.976562 23.859375 C 14.152344 23.859375 15.152344 23.621094 15.667969 23.453125 C 21.5 21.578125 24.992188 15.636719 23.789062 9.632812 C 22.558594 3.492188 16.839844 -0.652344 10.570312 0.0546875 "></path>
          </g>
        </g>
      </g>
    </svg>
  </defs>
  <style>
  #svg-source use[data-size="large"]{      fill-opacity: 1;      fill: transparent;    }    #svg-source use{      fill-opacity: 0;      fill: currentColor;    }  </style>

  <use x="0" y="0" data-size="large" xlink:href="#facebook-icon" style="color: #FFFFFF;" width="24px" height="24px"></use>

</svg></icon><span class="social-share__item-text">Facebook</span></button></li><li><button data-tracking-control-name="social_share_twitter" class="social-share__item" data-share-service="twitter"><icon class="social-share__item-icon lazy-loaded" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" version="1.1" focusable="false" class="lazy-loaded">
  <defs id="ui-icons">
    <svg id="twitter-icon" viewBox="0 0 24 24" width="24px" height="24px" x="0" y="0" preserveAspectRatio="xMinYMin meet" class="artdeco-icon">
      <g class="color-icon">
        <rect x="-0.003" style="fill:none;" width="24" height="24"></rect>
        <path style="fill:#6CADDE;" d="M21,7.7c0,0.2,0,0.4,0,0.6C21,14.4,16.5,21,8.3,21c-2.5,0-5.4-0.5-7.3-1.6c2.7,0,5.1-0.7,7-2c-2-0.2-3.7-1.3-4.3-3c0.7,0.1,1.9-0.1,2.3-0.3c-2-0.6-3.1-2.1-3.4-4.1c0.4,0.2,1.2,0.2,1.7,0.1c-1-0.8-1.4-2.2-1.4-3.8c0-0.8,0.2-1.7,0.6-2.3c1.9,2.8,5.2,4.9,8.7,5.1c-0.1-0.5-0.3-1.2-0.3-1.8C12,4.8,13.7,3,16.3,3c1.9,0,2.8,0.7,3.6,1.7c0.9-0.3,1.7-0.8,2.5-1.3c-0.2,1.1-0.8,2.1-1.8,2.7c0.9-0,1.8-0.3,2.6-0.7C22.7,6.2,22,7,21,7.7z"></path>
      </g>
    </svg>
  </defs>
  <style>
  #svg-source use[data-size="large"]{      fill-opacity: 1;      fill: transparent;    }    #svg-source use{      fill-opacity: 0;      fill: currentColor;    }  </style>

  <use x="0" y="0" data-size="large" xlink:href="#twitter-icon" style="color: #FFFFFF;" width="24px" height="24px"></use>

</svg></icon><span class="social-share__item-text">Twitter</span></button></li></ul></div><span class="social-ctas__number">0</span></li></ul></div></header><section class="article-body" data-redirect-url="https://www.linkedin.com/login?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein"><p>Today, we go back a bit, back to where we probably should have started in the first place, but it wouldn’t have been as much fun. In our previous work on&nbsp;<a href="http://www.reproduciblefinance.com/2017/07/12/introduction-to-volatility/" target="_blank" rel="nofollow noopener">volatility</a>, we zipped through the steps of importing data and transforming to monthly returns. If you’re familiar with Garrett and Hadley’s data science paradigm pictured below, we skimmed through the data import, tidying and transformation steps so that we could look at volatility.</p> 
  <div class="slate-resizable-image-embed slate-image-embed__resize-middle" data-image-href="http://r4ds.had.co.nz"> 
   <a href="http://r4ds.had.co.nz/" target="_blank" rel="nofollow noopener"><img data-media-urn="" src="./Transform Daily Prices to Monthly Log Returns_files/1520241953292" class="lazy-loaded"></a> 
  </div> 
  <p> -Garrett and Hadley’s data science paradigm from <a href="http://r4ds.had.co.nz/" target="_blank" rel="nofollow noopener">R For Datascience</a></p> 
  <p>Let’s correct that oversight and do some spade work on transforming daily prices to monthly log returns. To map back to the paradigm, grabbing the daily prices is our data import, and putting to log monthly returns is our tidying and transforming.</p> 
  <p>We will use a few packages and for completeness, we will cover several paths to getting our desired end result. Obviously it’s not necessary to utilize all of our paths here. The intention is to show several methods so that the best one can be chosen for a given challenge or project.</p> 
  <p>Let’s load up our packages.</p> 
  <pre spellcheck="false">library(tidyverse)
library(tidyquant)
library(timetk)
library(tibbletime)
</pre> 
  <p>We are building toward analyzing the returns of a 5-asset portfolio consisting of the following.</p> 
  <pre spellcheck="false"><span class="hljs-bullet">+ </span>SPY (S&amp;P500 fund) weighted 25%
<span class="hljs-bullet">+ </span>EFA (a non-US equities fund) weighted 25%
<span class="hljs-bullet">+ </span>IJS (a small-cap value fund) weighted 20%
<span class="hljs-bullet">+ </span>EEM (an emerging-mkts fund) weighted 20%
<span class="hljs-bullet">+ </span>AGG (a bond fund) weighted 10%
</pre> 
  <p>I chose those 5 assets because they seem to offer a balanced blend of large, small, international, emerging and bond exposure. We will eventually build a Shiny app to let users choose different assets and see different results. Today, we are just going to work with the individual prices/returns of those 5 assets.</p> 
  <h3>Importing the data</h3> 
  <p>On to step 1, wherein we import adjusted prices for the 5 ETFs to be used in our portfolio and save them to an&nbsp;xts&nbsp;object called&nbsp;prices.</p> 
  <p>We need a vector of ticker symbols that we will then pass to Yahoo! Finance via the&nbsp;getSymbols&nbsp;function from the&nbsp;quantmodpackage. This will return an object with the opening price, closing price, adjusted price, daily high, daily low and daily volume. We don’t want to work with all of those, though. The adjusted price is what we need.</p> 
  <p>To isolate the adjusted price, we use the&nbsp;map&nbsp;function from the&nbsp;purrr&nbsp;package and apply&nbsp;Ad(get(.))&nbsp;to the imported prices. This will ‘get’ the adjusted price from each of our individual price objects. We could stop here and have the right substance, but the format wouldn’t be great as we would have a&nbsp;list&nbsp;of 5 adjusted prices. The&nbsp;map&nbsp;function returns a list by default but I find them to be unwieldy.</p> 
  <p>The&nbsp;reduce(merge)&nbsp;function will allow us to merge the lists into one object and coerce back to an&nbsp;xts&nbsp;structure. Finally, we want intuitive column names and use&nbsp;colnames&lt;-&nbsp;to rename the columns. The&nbsp;rename&nbsp;function from&nbsp;dplyr&nbsp;will not work well here because the object structure is still&nbsp;xts.</p> 
  <pre spellcheck="false"><span class="hljs-comment"># The symbols vector holds our tickers. </span>
symbols &lt;- c(<span class="hljs-string">"SPY"</span>,<span class="hljs-string">"EFA"</span>, <span class="hljs-string">"IJS"</span>, <span class="hljs-string">"EEM"</span>,<span class="hljs-string">"AGG"</span>)

<span class="hljs-comment"># The prices object will hold our raw price data throughout this book.</span>
prices &lt;- 
  getSymbols(symbols, src = <span class="hljs-string">'yahoo'</span>, from = <span class="hljs-string">"2005-01-01"</span>, 
             auto.assign = <span class="hljs-keyword">TRUE</span>, warnings = <span class="hljs-keyword">FALSE</span>) %&gt;% 
  map(~Ad(get(.))) %&gt;% 
  reduce(merge) %&gt;%
  `colnames&lt;-`(symbols)
</pre> 
  <h3>The XTS World</h3> 
  <p>We now have an&nbsp;xts&nbsp;object of the adjusted prices for our 5 assets. Have a quick peek.</p> 
  <pre spellcheck="false">head(prices)
##                 SPY      EFA      IJS      EEM      AGG
## 2005-01-03 92.93685 37.27150 50.03791 17.75157 66.82627
## 2005-01-04 91.80122 36.55700 49.14064 17.20503 66.76101
## 2005-01-05 91.16773 36.53357 48.22669 16.99442 66.73489
## 2005-01-06 91.63127 36.53357 48.51465 16.98286 66.78063
## 2005-01-07 91.49993 36.36959 47.88866 17.01574 66.76101
## 2005-01-10 91.93256 36.53357 48.30181 17.03707 66.72842
</pre> 
  <p>Our first reading is from January 3, 2005 (the first trading day of that year) and we have daily prices. Let’s stay in thextsworld and convert to monthly prices using a call to&nbsp;to.monthly(prices, indexAt = "last", OHLC = FALSE)&nbsp;from&nbsp;quantmod. The argument&nbsp;index = "last"&nbsp;tells the function whether we want to index to the first day of the month or the last day.</p> 
  <pre spellcheck="false">prices_monthly &lt;- to.monthly(prices, indexAt = <span class="hljs-string">"last"</span>, OHLC = <span class="hljs-literal">FALSE</span>)

head(prices_monthly)
<span class="hljs-meta">##                 SPY      EFA      IJS      EEM      AGG</span>
<span class="hljs-meta">## 2005-01-31 91.28361 36.82640 49.17820 17.84311 67.15263</span>
<span class="hljs-meta">## 2005-02-28 93.19177 38.22026 50.60547 19.57072 66.90322</span>
<span class="hljs-meta">## 2005-03-31 91.48705 37.21762 49.41122 18.02263 66.25140</span>
<span class="hljs-meta">## 2005-04-29 89.77301 36.61556 46.88139 17.79779 67.39282</span>
<span class="hljs-meta">## 2005-05-31 92.66592 36.29930 49.76724 18.36033 67.95058</span>
<span class="hljs-meta">## 2005-06-30 92.80633 36.81937 51.71587 19.08906 68.54597</span>
</pre> 
  <p>We now have an&nbsp;xts&nbsp;object, and we have moved from daily prices to monthly prices.</p> 
  <p>Now we’ll call&nbsp;Return.calculate(prices_monthly, method = "log")&nbsp;to convert to returns and save as an object called&nbsp;assed_returns_xts. Note this will give us log returns by the&nbsp;method = "log"&nbsp;argument. We could have used&nbsp;method = "discrete"&nbsp;to get simple returns.</p> 
  <pre spellcheck="false">asset_returns_xts &lt;- na.omit(<span class="hljs-keyword">Return</span>.calculate(prices_monthly, method = <span class="hljs-string">"log"</span>))

head(asset_returns_xts)
<span class="hljs-comment">##                     SPY          EFA         IJS         EEM          AGG</span>
<span class="hljs-comment">## 2005-02-28  0.020688126  0.037150948  0.02860922  0.09241734 -0.003721035</span>
<span class="hljs-comment">## 2005-03-31 -0.018461970 -0.026583514 -0.02388197 -0.08240681 -0.009790455</span>
<span class="hljs-comment">## 2005-04-29 -0.018913092 -0.016309073 -0.05255675 -0.01255390  0.017081857</span>
<span class="hljs-comment">## 2005-05-31  0.031716351 -0.008674664  0.05973606  0.03111818  0.008242118</span>
<span class="hljs-comment">## 2005-06-30  0.001514103  0.014225362  0.03840786  0.03892299  0.008724056</span>
<span class="hljs-comment">## 2005-07-29  0.037547542  0.029527397  0.05677107  0.07400825 -0.010408874</span>
</pre> 
  <p>From a substantive perspective, we could stop right now. Our task has been accomplished: we have imported daily prices, trimmed to adjusted prices, moved to monthly prices and transformed to monthly log returns.</p> 
  <p>If we wished to visualize these log returns, we would go straight to&nbsp;highcharter&nbsp;and pass in the various&nbsp;xts&nbsp;series.</p> 
  <p>For now, though, let’s take a look at a few more methods.</p> 
  <h3>The Tidyverse and Tidyquant World</h3> 
  <p>We now take the same raw data, which is the&nbsp;prices&nbsp;object we created upon data import and convert it to monthly returns using 3 alternative methods. We will make use of the&nbsp;dplyr,&nbsp;tidyquant,&nbsp;timetk&nbsp;and&nbsp;tibbletime&nbsp;packages.</p> 
  <p>For our first method, we use&nbsp;dplyr&nbsp;and&nbsp;timetk&nbsp;to convert our object from an&nbsp;xts&nbsp;object of prices to a&nbsp;tibble&nbsp;of monthly returns. Once we convert to a&nbsp;tibble&nbsp;the tidyverse is available for all sort of manipulations.</p> 
  <p>Let’s step through the logic before getting to the code chunk.</p> 
  <p>In the piped workflow below, our first step is to use the&nbsp;tk_tbl(preserve_index = TRUE, rename_index = "date")&nbsp;function to convert from&nbsp;xts&nbsp;to&nbsp;tibble. The two arguments will convert the&nbsp;xts&nbsp;date index to a date column, and rename it “date”. If we stopped here, we would have a new prices object in&nbsp;tibble&nbsp;format.</p> 
  <p>Next we turn to&nbsp;dplyr&nbsp;to&nbsp;gather&nbsp;our new data frame into long format and then&nbsp;group_by&nbsp;asset. We have not done any calculations yet, we have just shifted from wide format, to long, tidy format. Notice that when we gathered our data, we renamed one of the columns to&nbsp;returns&nbsp;even though the data are still prices. The next step will explain why we did that.</p> 
  <p>Next, we want to calculate log returns and add those returns to the data frame. We will use&nbsp;mutate&nbsp;and our own calculation to get log returns:&nbsp;mutate(returns = (log(returns) - log(lag(returns)))). Notice that I am putting our new log returns into the&nbsp;returns&nbsp;column by calling&nbsp;returns = .... This is going to remove the price data and replace it with log returns data. This is the explanation for why, when we called&nbsp;gather&nbsp;in the previous step, we renamed the column to&nbsp;returns. That allows us to simply replace that column with log return data instead of having to create a new column and then delete the price data column.</p> 
  <p>Our last two steps are to&nbsp;spread&nbsp;the data back to wide format, which makes it easier to compare to the&nbsp;xts&nbsp;object and easier to read, but is not a best practice in the tidyverse. We are going to look at this new object and compare to the&nbsp;xtsobject above, so we will stick with wide format for now.</p> 
  <p>Finally, we want to reorder the columns to align with the&nbsp;symbols&nbsp;vector. That’s important because when we build a portfolio, we will use that vector to coordinate our different weights.</p> 
  <pre spellcheck="false">asset_returns_dplyr_byhand &lt;- prices %&gt;% 
  to.monthly(indexAt = <span class="hljs-string">"last"</span>, OHLC = FALSE) %&gt;% 
  tk_tbl(preserve_index = TRUE, rename_index = <span class="hljs-string">"date"</span>) %&gt;%
  gather(asset, returns, -date) %&gt;% 
  group_by(asset) %&gt;%  
  mutate(returns = (<span class="hljs-built_in">log</span>(returns) - <span class="hljs-built_in">log</span>(lag(returns)))) %&gt;%
  spread(asset, returns) %&gt;% 
  select(date, symbols)
</pre> 
  <p>For our second method in the tidy world, we’ll use the&nbsp;tq_transmute&nbsp;function from&nbsp;tidyquant. Instead of using&nbsp;to.monthlyand&nbsp;mutate, and then supplying our own calculation, we use&nbsp;tq_transmute(mutate_fun = periodReturn, period = "monthly", type = "log")&nbsp;and go straight from daily prices to monthly log returns. Note that we select the period as ‘monthly’ in that function call, which means we can pass in the raw daily&nbsp;prices&nbsp;xts&nbsp;object..</p> 
  <pre spellcheck="false">asset_returns_tq_<span class="hljs-built_in">builtin</span> &lt;- prices %&gt;%
  tk_tbl(preserve_index = TRUE, rename_index = <span class="hljs-string">"date"</span>) %&gt;%
  gather(asset, prices, -date) %&gt;% 
  group_by(asset) %&gt;%
  tq_transmute(mutate_fun = periodReturn, period = <span class="hljs-string">"monthly"</span>, <span class="hljs-built_in">type</span> = <span class="hljs-string">"log"</span>) %&gt;% 
  spread(asset, monthly.returns) %&gt;% 
  select(date, symbols)
</pre> 
  <p>Our third method in the tidy world will produce the same output as the previous two - a&nbsp;tibble&nbsp;of monthly log returns - but we will also introduce the&nbsp;tibbletime&nbsp;package and it’s function&nbsp;as_period. As the name implies, this function allows us to cast the prices time series from daily to monthly (or weekly or quarterly etc.) in our&nbsp;tibble&nbsp;instead of having to apply the&nbsp;to.monthly&nbsp;function to the&nbsp;xts&nbsp;object as we did previously.</p> 
  <p>Furthermore, unlike the previous code chunk above where we went from daily prices straight to monthly returns, here we go from daily prices to monthly prices to monthly returns. That is, we will first create a&nbsp;tibble&nbsp;of monthly prices, then pipe to create monthly returns.</p> 
  <p>We don’t have a substantive reason for doing that here, but it could prove useful if there’s a time when we need to get monthly prices in isolation during a tidyverse-based piped workflow.</p> 
  <pre spellcheck="false">asset_returns_tbltime &lt;- prices %&gt;% 
  tk_tbl(preserve_index = TRUE, rename_index = <span class="hljs-string">"date"</span>) %&gt;%
  tbl_time(index = <span class="hljs-string">"date"</span>) %&gt;% 
  as_period(<span class="hljs-string">"monthly"</span>, side = <span class="hljs-string">"end"</span>) %&gt;%
  gather(asset, returns, -date) %&gt;% 
  group_by(asset) %&gt;% 
  tq_transmute(mutate_fun = periodReturn, <span class="hljs-keyword">type</span> = <span class="hljs-string">"log"</span>) %&gt;% 
  spread(asset, monthly.returns) %&gt;% 
  <span class="hljs-keyword">select</span>(date, symbols)
</pre> 
  <p>Let’s take a peek at our 4 monthly log return objects.</p> 
  <pre spellcheck="false">head(asset_returns_xts)
##                     SPY          EFA         IJS         EEM          AGG
## 2005-02-28  0.020688126  0.037150948  0.02860922  0.09241734 -0.003721035
## 2005-03-31 -0.018461970 -0.026583514 -0.02388197 -0.08240681 -0.009790455
## 2005-04-29 -0.018913092 -0.016309073 -0.05255675 -0.01255390  0.017081857
## 2005-05-31  0.031716351 -0.008674664  0.05973606  0.03111818  0.008242118
## 2005-06-30  0.001514103  0.014225362  0.03840786  0.03892299  0.008724056
## 2005-07-29  0.037547542  0.029527397  0.05677107  0.07400825 -0.010408874

head(asset_returns_dplyr_byhand)
## # A tibble: 6 x 6
##         date          SPY          EFA         IJS         EEM
##       &lt;date&gt;        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
## 1 2005-01-31           NA           NA          NA          NA
## 2 2005-02-28  0.020688126  0.037150948  0.02860922  0.09241734
## 3 2005-03-31 -0.018461970 -0.026583514 -0.02388197 -0.08240681
## 4 2005-04-29 -0.018913092 -0.016309073 -0.05255675 -0.01255390
## 5 2005-05-31  0.031716351 -0.008674664  0.05973606  0.03111818
## 6 2005-06-30  0.001514103  0.014225362  0.03840786  0.03892299
## # ... with 1 more variables: AGG &lt;dbl&gt;

head(asset_returns_tq_builtin)
## # A tibble: 6 x 6
##         date          SPY          EFA         IJS          EEM
##       &lt;date&gt;        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;
## 1 2005-01-31 -0.017948944 -0.012014062 -0.01733050  0.005143195
## 2 2005-02-28  0.020688126  0.037150948  0.02860922  0.092417342
## 3 2005-03-31 -0.018461970 -0.026583514 -0.02388197 -0.082406812
## 4 2005-04-29 -0.018913092 -0.016309073 -0.05255675 -0.012553902
## 5 2005-05-31  0.031716351 -0.008674664  0.05973606  0.031118184
## 6 2005-06-30  0.001514103  0.014225362  0.03840786  0.038922991
## # ... with 1 more variables: AGG &lt;dbl&gt;

head(asset_returns_tbltime)
## # A tibble: 6 x 6
##         date          SPY          EFA         IJS         EEM
##       &lt;date&gt;        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
## 1 2005-01-31  0.000000000  0.000000000  0.00000000  0.00000000
## 2 2005-02-28  0.020688126  0.037150948  0.02860922  0.09241734
## 3 2005-03-31 -0.018461970 -0.026583514 -0.02388197 -0.08240681
## 4 2005-04-29 -0.018913092 -0.016309073 -0.05255675 -0.01255390
## 5 2005-05-31  0.031716351 -0.008674664  0.05973606  0.03111818
## 6 2005-06-30  0.001514103  0.014225362  0.03840786  0.03892299
## # ... with 1 more variables: AGG &lt;dbl&gt;
</pre> 
  <p>First, have a look at the left most column in each object, where the date is stored. The&nbsp;asset_returns_xts&nbsp;has a date index, not a column. It is accessed via&nbsp;index(asset_returns_xts). The data frame objects have a column called “date”, accessed via the&nbsp;$date&nbsp;convention, e.g.&nbsp;asset_returns_dplyr_byhand$date.</p> 
  <p>Second, notice the first observation in each of the objects. Only&nbsp;asset_returns_tqtbl&nbsp;has an observation for January of 2005. The other 3 elided January of 2005 when we cast from daily to monthly. Do we care? Does it matter to our final calculations? Perhaps and probably. Either way, we need to be aware of the consequences of taking our raw data and reshaping it via different methods.</p> 
  <p>Third, each of these objects is in “wide” format, which in this case means there is a column for each of our assets. When we called&nbsp;spread&nbsp;at the end of the piped code flow, we put the data frames back to wide format.</p> 
  <p>This is the format that&nbsp;xts&nbsp;likes and it’s the format that is easier to read as a human. However, the tidyverse wants this data to be in long or tidy format so that each variable has its own column. For our asset_returns objects, that would mean a column called “date”, a column called “asset” and a column called “returns”. To see that in action, here is how it looks.</p> 
  <pre spellcheck="false">asset_returns_long_format &lt;- 
  asset_returns_dplyr_byhand %&gt;% 
  gather(asset, returns, -date)

head(asset_returns_long_format)
<span class="hljs-meta">## # A tibble: 6 x 3</span>
<span class="hljs-meta">##         date asset      returns</span>
<span class="hljs-meta">##       &lt;date&gt; &lt;chr&gt;        &lt;dbl&gt;</span>
<span class="hljs-meta">## 1 2005-01-31   SPY           NA</span>
<span class="hljs-meta">## 2 2005-02-28   SPY  0.020688126</span>
<span class="hljs-meta">## 3 2005-03-31   SPY -0.018461970</span>
<span class="hljs-meta">## 4 2005-04-29   SPY -0.018913092</span>
<span class="hljs-meta">## 5 2005-05-31   SPY  0.031716351</span>
<span class="hljs-meta">## 6 2005-06-30   SPY  0.001514103</span>
</pre> 
  <p>We now have 3 columns and if we want to run an operation like&nbsp;mutate&nbsp;on each asset, we just need to call&nbsp;goup_by(asset)in the piped flow.</p> 
  <p>Before we conclude, I would be remiss without calling out an important point that I skipped for the sake of brevity. We transformed daily prices to monthly log returns, but never explained, justified or mentioned why we chose log returns instead of simple returns.</p> 
  <p>We are making an assumption that our colleagues, collaborators or clients understand and agree with that decision. Even if they happen to do so, we should explain our transformation as a matter of best practice: justify the logic for data transformations, even if those transformations represent a standard operating procedure. Else, we might have a team that starts to skip the logic when the data transformations are a bit more non-standard, or even controversial. Since we might perform this prices to log returns in several projects, we could simply have one&nbsp;<a href="http://rmarkdown.rstudio.com/r_notebooks.html" target="_blank" rel="nofollow noopener">R Notebook</a>&nbsp;that our team references to explain why we use log returns. Over time, we can build a repository of documents that explain the theory behind our data tidying and transformation practices.</p> 
  <p>That’s all for today. Next time we will visualize these individual asset returns (and will notice that our log returns have a normal distribution, which will be important when we run simulations) before combining them into portfolio returns based on the different weightings. Thanks and see you next time.</p> 
  <h3><br></h3>
 
</section><div class="author-info author-info__container"><div class="mini-card mini-profile mini-card--flat mini-profile--flat"><img class="mini-card__image mini-profile__image mini-card__image--flat mini-profile__image--flat lazy-loaded" alt="Jonathan Regenstein" src="./Transform Daily Prices to Monthly Log Returns_files/244xhbkr7g40x6bsu4gi6q4ry"><section class="mini-card__content mini-profile__content mini-card__content--flat mini-profile__content--flat"><h3 class="mini-card__title mini-profile__title mini-card__title--flat mini-profile__title--flat"><a class="mini-card__title-link mini-profile__title-link mini-card__title-link--flat mini-profile__title-link--flat" data-tracking-control-name="author_mini-profile_title" data-tracking-will-navigate="" href="https://www.linkedin.com/in/jkregenstein?trk=author_mini-profile_title" aria-label="View profile for Jonathan Regenstein">Jonathan Regenstein</a></h3><h4 class="mini-card__subtitle mini-profile__subtitle mini-card__subtitle--flat mini-profile__subtitle--flat">Head of Data and Quantamental Research at Truist Securities</h4></section></div><a class="author-info__follow-button-bottom" data-tracking-will-navigate="" data-tracking-control-name="author-info__follow-button-bottom" href="https://www.linkedin.com/login?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein&amp;trk=author-info__follow-button-bottom">Follow</a></div><div class="article-comment__container" data-article-urn="urn:li:article:7868891355894256449" data-article-permalink="transform-daily-prices-monthly-log-returns-jonathan-regenstein"><div class="article-comment__header" data-total-comment="4">4 comments</div><div class="article-comment__guest-leave-comment"><img class="article-comment__guest-image" src="./Transform Daily Prices to Monthly Log Returns_files/244xhbkr7g40x6bsu4gi6q4ry" alt="article-comment__guest-image"><div class="article-comment__guest-signin-view"><a class="article-comment__guest-leave-comment--signin" data-tracking-control-name="article-reader_guest-leave-comment" data-tracking-will-navigate="" href="https://www.linkedin.com/login?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein&amp;trk=article-reader_leave-comment">Sign in </a>to leave your comment</div></div><div class="article-comments-insert-slot"><div class="article-comment first-level-comment" data-total-reply="0"><div data-impression-id="article-comment-author_mini-profile_mini-card" class="mini-card mini-profile mini-card--flat mini-profile--flat"><img class="mini-card__image mini-profile__image mini-card__image--flat mini-profile__image--flat lazy-loaded" alt="MohammaD Gavahi" src="./Transform Daily Prices to Monthly Log Returns_files/1516813663437"><section class="mini-card__content mini-profile__content mini-card__content--flat mini-profile__content--flat"><h3 class="mini-card__title mini-profile__title mini-card__title--flat mini-profile__title--flat"><a class="mini-card__title-link mini-profile__title-link mini-card__title-link--flat mini-profile__title-link--flat" data-tracking-control-name="article-comment-author_mini-profile_title" data-tracking-will-navigate="" href="https://ir.linkedin.com/in/mohammad-gavahi-53a18280?trk=article-comment-author_mini-profile_title" aria-label="View profile for MohammaD Gavahi">MohammaD Gavahi</a></h3><h4 class="mini-card__subtitle mini-profile__subtitle mini-card__subtitle--flat mini-profile__subtitle--flat">Data Scientist</h4></section></div><div class="article-comment__content"><p class="article-comment__text">hi, if want to change the date of yearly return, how can do it?
for example in function use 01-01-2000 for start get date and I want to start date from 01-08-2000.</p><div class="article-comment__social-bar"><div class="article-comment__left-control-wrapper"><div class="control-wrapper like"><a href="https://www.linkedin.com/login?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein&amp;trk=article-reader_like-comment" class="article-comment__like-button" data-tracking-control-name="article-comment-like" data-tracking-will-navigate="">Like</a></div><div class="control-wrapper reply"><a class="article-comment__reply-button" data-tracking-control-name="article-comment-like" data-tracking-will-navigate="" href="https://www.linkedin.com/login?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein&amp;trk=article-reader_reply-comment">Reply</a></div></div><div class="article-comment__right-control-wrapper"></div></div></div><div class="article-comment__meta"><span class="article-comment__createdTime">4d</span><div class="ellipsis-menu article-comment__ellipsis-menu"><div class="collapsible-dropdown"><button class="ellipsis-menu__trigger ellipsis-menu__trigger--small collapsible-dropdown__button" aria-label="Open menu" aria-expanded="false" data-tracking-control-name="article-comment_ellipsis-menu-trigger"><icon class="ellipsis-menu__trigger-icon lazy-loaded" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" id="ellipsis-horizontal-small" data-supported-dps="16x16" fill="currentColor" focusable="false" class="lazy-loaded">
  <path d="M2 7h2v2H2V7zm5 2h2V7H7v2zm5-2v2h2V7h-2z"></path>
</svg></icon></button><ul class="collapsible-dropdown__list hidden" role="menu" tabindex="-1"><li class="ellipsis-menu__item"><a href="https://www.linkedin.com/login?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein&amp;trk=article-comment_ellipsis-menu-sign-in-redirect" class="ellipsis-menu__item-button" data-tracking-control-name="article-comment_ellipsis-menu-sign-in-redirect" data-tracking-will-navigate=""><icon class="ellipsis-menu__item-icon lazy-loaded" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" id="flag-large" data-supported-dps="24x24" fill="currentColor" focusable="false" class="lazy-loaded">
  <path d="M13.82 5L14 4a1 1 0 00-1-1H5V2H3v20h2v-7h4.18L9 16a1 1 0 001 1h8.87L21 5h-7.18zM5 13V5h6.94l-1.41 8H5zm12.35 2h-6.3l1.42-8h6.29z"></path>
</svg></icon>Report this comment</a></li></ul></div></div></div></div><div class="article-comment first-level-comment" data-total-reply="1"><div data-impression-id="article-comment-author_mini-profile_mini-card" class="mini-card mini-profile mini-card--flat mini-profile--flat"><img class="mini-card__image mini-profile__image mini-card__image--flat mini-profile__image--flat lazy-loaded" alt="Aaron Simumba" src="./Transform Daily Prices to Monthly Log Returns_files/1557935124994"><section class="mini-card__content mini-profile__content mini-card__content--flat mini-profile__content--flat"><h3 class="mini-card__title mini-profile__title mini-card__title--flat mini-profile__title--flat"><a class="mini-card__title-link mini-profile__title-link mini-card__title-link--flat mini-profile__title-link--flat" data-tracking-control-name="article-comment-author_mini-profile_title" data-tracking-will-navigate="" href="https://zm.linkedin.com/in/aaronsimumba?trk=article-comment-author_mini-profile_title" aria-label="View profile for Aaron Simumba">Aaron Simumba</a></h3><h4 class="mini-card__subtitle mini-profile__subtitle mini-card__subtitle--flat mini-profile__subtitle--flat">Business Intelligence &amp; Analytics Lead | Data Science | Data Engineering</h4></section></div><div class="article-comment__content"><p class="article-comment__text">Great write up as always. I have been following keenly you writings. Learning something new every time. Kindly rectify a few typos in the post. If it's on github I can submit a PR.</p><div class="article-comment__social-bar"><div class="article-comment__left-control-wrapper"><div class="control-wrapper like"><a href="https://www.linkedin.com/login?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein&amp;trk=article-reader_like-comment" class="article-comment__like-button" data-tracking-control-name="article-comment-like" data-tracking-will-navigate="">Like</a></div><div class="control-wrapper reply"><a class="article-comment__reply-button" data-tracking-control-name="article-comment-like" data-tracking-will-navigate="" href="https://www.linkedin.com/login?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein&amp;trk=article-reader_reply-comment">Reply</a></div></div><div class="article-comment__right-control-wrapper"><div class="article-comment__reply-modal"><span class="article-comment__social-count">1 Reply</span></div></div></div><div class="article-comment__nested-comments" data-comment-urn="urn:li:comment:(article:7868891355894256449,6318767647613820928)"><div class="article-comment nested-comment" data-total-reply=""><div data-impression-id="article-comment-author_mini-profile_mini-card" class="mini-card mini-profile mini-card--flat mini-profile--flat"><img class="mini-card__image mini-profile__image mini-card__image--flat mini-profile__image--flat lazy-loaded" alt="Jonathan Regenstein" src="./Transform Daily Prices to Monthly Log Returns_files/244xhbkr7g40x6bsu4gi6q4ry"><section class="mini-card__content mini-profile__content mini-card__content--flat mini-profile__content--flat"><h3 class="mini-card__title mini-profile__title mini-card__title--flat mini-profile__title--flat"><a class="mini-card__title-link mini-profile__title-link mini-card__title-link--flat mini-profile__title-link--flat" data-tracking-control-name="article-comment-author_mini-profile_title" data-tracking-will-navigate="" href="https://www.linkedin.com/in/jkregenstein?trk=article-comment-author_mini-profile_title" aria-label="View profile for Jonathan Regenstein">Jonathan Regenstein</a></h3><h4 class="mini-card__subtitle mini-profile__subtitle mini-card__subtitle--flat mini-profile__subtitle--flat">Head of Data and Quantamental Research at Truist Securities</h4></section></div><div class="article-comment__content"><p class="article-comment__text">Thanks, Aaron. Any R/code typos, feel free to direct message me or paste them in the comments. I will edit accordingly! </p><div class="article-comment__social-bar"><div class="article-comment__left-control-wrapper"><div class="control-wrapper like"><a href="https://www.linkedin.com/login?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein&amp;trk=article-reader_like-comment" class="article-comment__like-button" data-tracking-control-name="article-comment-like" data-tracking-will-navigate="">Like</a></div><div class="control-wrapper reply"><a class="article-comment__reply-button" data-tracking-control-name="article-comment-like" data-tracking-will-navigate="" href="https://www.linkedin.com/login?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein&amp;trk=article-reader_reply-comment">Reply</a></div></div><div class="article-comment__right-control-wrapper"></div></div></div><div class="article-comment__meta"><span class="article-comment__createdTime">3y</span><div class="ellipsis-menu article-comment__ellipsis-menu"><div class="collapsible-dropdown"><button class="ellipsis-menu__trigger ellipsis-menu__trigger--small collapsible-dropdown__button" aria-label="Open menu" aria-expanded="false" data-tracking-control-name="article-comment_ellipsis-menu-trigger"><icon class="ellipsis-menu__trigger-icon lazy-loaded" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" id="ellipsis-horizontal-small" data-supported-dps="16x16" fill="currentColor" focusable="false" class="lazy-loaded">
  <path d="M2 7h2v2H2V7zm5 2h2V7H7v2zm5-2v2h2V7h-2z"></path>
</svg></icon></button><ul class="collapsible-dropdown__list hidden" role="menu" tabindex="-1"><li class="ellipsis-menu__item"><a href="https://www.linkedin.com/login?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein&amp;trk=article-comment_ellipsis-menu-sign-in-redirect" class="ellipsis-menu__item-button" data-tracking-control-name="article-comment_ellipsis-menu-sign-in-redirect" data-tracking-will-navigate=""><icon class="ellipsis-menu__item-icon lazy-loaded" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" id="flag-large" data-supported-dps="24x24" fill="currentColor" focusable="false" class="lazy-loaded">
  <path d="M13.82 5L14 4a1 1 0 00-1-1H5V2H3v20h2v-7h4.18L9 16a1 1 0 001 1h8.87L21 5h-7.18zM5 13V5h6.94l-1.41 8H5zm12.35 2h-6.3l1.42-8h6.29z"></path>
</svg></icon>Report this comment</a></li></ul></div></div></div></div></div></div><div class="article-comment__meta"><span class="article-comment__createdTime">3y</span><div class="ellipsis-menu article-comment__ellipsis-menu"><div class="collapsible-dropdown"><button class="ellipsis-menu__trigger ellipsis-menu__trigger--small collapsible-dropdown__button" aria-label="Open menu" aria-expanded="false" data-tracking-control-name="article-comment_ellipsis-menu-trigger"><icon class="ellipsis-menu__trigger-icon lazy-loaded" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" id="ellipsis-horizontal-small" data-supported-dps="16x16" fill="currentColor" focusable="false" class="lazy-loaded">
  <path d="M2 7h2v2H2V7zm5 2h2V7H7v2zm5-2v2h2V7h-2z"></path>
</svg></icon></button><ul class="collapsible-dropdown__list hidden" role="menu" tabindex="-1"><li class="ellipsis-menu__item"><a href="https://www.linkedin.com/login?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein&amp;trk=article-comment_ellipsis-menu-sign-in-redirect" class="ellipsis-menu__item-button" data-tracking-control-name="article-comment_ellipsis-menu-sign-in-redirect" data-tracking-will-navigate=""><icon class="ellipsis-menu__item-icon lazy-loaded" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" id="flag-large" data-supported-dps="24x24" fill="currentColor" focusable="false" class="lazy-loaded">
  <path d="M13.82 5L14 4a1 1 0 00-1-1H5V2H3v20h2v-7h4.18L9 16a1 1 0 001 1h8.87L21 5h-7.18zM5 13V5h6.94l-1.41 8H5zm12.35 2h-6.3l1.42-8h6.29z"></path>
</svg></icon>Report this comment</a></li></ul></div></div></div></div><div class="article-comment first-level-comment" data-total-reply="0"><div data-impression-id="article-comment-author_mini-profile_mini-card" class="mini-card mini-profile mini-card--flat mini-profile--flat"><img class="mini-card__image mini-profile__image mini-card__image--flat mini-profile__image--flat lazy-load" data-delayed-url="https://media-exp1.licdn.com/dms/image/C4E03AQHQD-hENF6Lzg/profile-displayphoto-shrink_100_100/0/1516781160459?e=1622073600&amp;v=beta&amp;t=tM2Ch9K366a9SOPPeBWmqtI54KOGR7ruzqQSlOHWKnw" alt="Matt Dancho"><section class="mini-card__content mini-profile__content mini-card__content--flat mini-profile__content--flat"><h3 class="mini-card__title mini-profile__title mini-card__title--flat mini-profile__title--flat"><a class="mini-card__title-link mini-profile__title-link mini-card__title-link--flat mini-profile__title-link--flat" data-tracking-control-name="article-comment-author_mini-profile_title" data-tracking-will-navigate="" href="https://www.linkedin.com/in/mattdancho?trk=article-comment-author_mini-profile_title" aria-label="View profile for Matt Dancho">Matt Dancho</a></h3><h4 class="mini-card__subtitle mini-profile__subtitle mini-card__subtitle--flat mini-profile__subtitle--flat">2000+ students | Learning Data Science for Business | R &amp; Python Instructor</h4></section></div><div class="article-comment__content"><p class="article-comment__text">Great article Jonathan Regenstein! Getting returns used to be a pain in the butt! Interesting how each of the methods get the same result. Nice work.</p><div class="article-comment__social-bar"><div class="article-comment__left-control-wrapper"><div class="control-wrapper like"><a href="https://www.linkedin.com/login?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein&amp;trk=article-reader_like-comment" class="article-comment__like-button" data-tracking-control-name="article-comment-like" data-tracking-will-navigate="">Like</a></div><div class="control-wrapper reply"><a class="article-comment__reply-button" data-tracking-control-name="article-comment-like" data-tracking-will-navigate="" href="https://www.linkedin.com/login?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein&amp;trk=article-reader_reply-comment">Reply</a></div></div><div class="article-comment__right-control-wrapper"></div></div></div><div class="article-comment__meta"><span class="article-comment__createdTime">4y</span><div class="ellipsis-menu article-comment__ellipsis-menu"><div class="collapsible-dropdown"><button class="ellipsis-menu__trigger ellipsis-menu__trigger--small collapsible-dropdown__button" aria-label="Open menu" aria-expanded="false" data-tracking-control-name="article-comment_ellipsis-menu-trigger"><icon class="ellipsis-menu__trigger-icon" data-delayed-url="https://static-exp1.licdn.com/sc/h/4fhyzm5kx5f9n32dgeb33w9cg"></icon></button><ul class="collapsible-dropdown__list hidden" role="menu" tabindex="-1"><li class="ellipsis-menu__item"><a href="https://www.linkedin.com/login?session_redirect=https%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fpulse%2Ftransform-daily-prices-monthly-log-returns-jonathan-regenstein&amp;trk=article-comment_ellipsis-menu-sign-in-redirect" class="ellipsis-menu__item-button" data-tracking-control-name="article-comment_ellipsis-menu-sign-in-redirect" data-tracking-will-navigate=""><icon class="ellipsis-menu__item-icon lazy-loaded" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" id="flag-large" data-supported-dps="24x24" fill="currentColor" focusable="false" class="lazy-loaded">
  <path d="M13.82 5L14 4a1 1 0 00-1-1H5V2H3v20h2v-7h4.18L9 16a1 1 0 001 1h8.87L21 5h-7.18zM5 13V5h6.94l-1.41 8H5zm12.35 2h-6.3l1.42-8h6.29z"></path>
</svg></icon>Report this comment</a></li></ul></div></div></div></div></div><div class="article-comment__show-more-section" data-tracking-control-name="article-comment_show-more-link"><div class="article-comment__show-more-link article-comment--hide-show-more">Show more comments.</div></div></div></article><div class="main related-articles-container"><hr><span class="related-articles__title-container"><h3 class="related-articles__title">More from Jonathan Regenstein</h3><a data-tracking-will-navigate="" data-tracking-control-name="author-info__articles-link" href="https://www.linkedin.com/today/author/jkregenstein?trk=author-info__article-link">43 articles</a></span><div class="related-articles"><div class="article-card"><div class="article-card__image--wrapper"><img class="lazy-load article-card__image" alt="If you want to understand how to succeed in the hedge fund world, read these two books" data-delayed-url="https://media-exp1.licdn.com/dms/image/C4E12AQEBaAU40MkwJA/article-cover_image-shrink_600_2000/0/1575223127007?e=1622073600&amp;v=beta&amp;t=OS3V_hprmcNGvKOSEa_peOvjCOW_4qoAFhCeth_NE-I"></div><div class="article-card__content"><h3 class="article-card__title"><a class="article-card__title--link" href="https://www.linkedin.com/pulse/you-want-understand-how-succeed-hedge-fund-world-read-regenstein?trk=read_related_article-card_title" data-tracking-control-name="read_related_article-card_title" data-tracking-will-navigate="">If you want to understand how to succeed in…</a></h3><p class="article-card__meta-info"><span class="article-card__meta-info-item">December 1, 2019</span></p> <p class="article-card__meta-info article-card__meta-info--counts"></p></div></div><div class="article-card"><div class="article-card__image--wrapper"><img class="lazy-load article-card__image" alt="Momentum investing with R" data-delayed-url="https://media-exp1.licdn.com/dms/image/C4E12AQEqW4tpHh6-6Q/article-cover_image-shrink_600_2000/0/1559228408524?e=1622073600&amp;v=beta&amp;t=CFa1AMOVurvpK3ki08GaVlaXoPeP6rGhkKQEcCLwuxU"></div><div class="article-card__content"><h3 class="article-card__title"><a class="article-card__title--link" href="https://www.linkedin.com/pulse/momentum-investing-r-jonathan-regenstein?trk=read_related_article-card_title" data-tracking-control-name="read_related_article-card_title" data-tracking-will-navigate="">Momentum investing with R</a></h3><p class="article-card__meta-info"><span class="article-card__meta-info-item">May 30, 2019</span></p> <p class="article-card__meta-info article-card__meta-info--counts"></p></div></div><div class="article-card"><div class="article-card__image--wrapper"><img class="lazy-load article-card__image" alt="Some Sector Analysis with R" data-delayed-url="https://media-exp1.licdn.com/dms/image/C4E12AQEF9sv47d_29w/article-cover_image-shrink_720_1280/0/1550504103214?e=1622073600&amp;v=beta&amp;t=yHQjTrLU__xImAJTKyySi6vrJXsIU_2BYmqtirIlgKE"></div><div class="article-card__content"><h3 class="article-card__title"><a class="article-card__title--link" href="https://www.linkedin.com/pulse/some-sector-analysis-r-jonathan-regenstein?trk=read_related_article-card_title" data-tracking-control-name="read_related_article-card_title" data-tracking-will-navigate="">Some Sector Analysis with R</a></h3><p class="article-card__meta-info"><span class="article-card__meta-info-item">February 18, 2019</span></p> <p class="article-card__meta-info article-card__meta-info--counts"></p></div></div></div></div><script src="./Transform Daily Prices to Monthly Log Returns_files/aznpg03rmp0yg9vvr57ncbk5b" async="" defer=""></script><footer class="li-footer"><ul class="li-footer__list"><li class="li-footer__item"><span class="sr-only">LinkedIn</span><icon class="li-footer__copy-logo" data-delayed-url="https://static-exp1.licdn.com/sc/h/b11vnqql8f4abtysggvq9v836"></icon><span class="li-footer__copy-text">© 2020</span></li><li class="li-footer__item"><a href="https://about.linkedin.com/?trk=article_reader_footer_footer-about" data-tracking-control-name="article_reader_footer_footer-about" data-tracking-will-navigate="" class="li-footer__item-link">About</a></li><li class="li-footer__item"><a href="https://www.linkedin.com/accessibility?trk=article_reader_footer_footer-accessibility" data-tracking-control-name="article_reader_footer_footer-accessibility" data-tracking-will-navigate="" class="li-footer__item-link">Accessibility</a></li><li class="li-footer__item"><a href="https://www.linkedin.com/legal/user-agreement?trk=article_reader_footer_footer-user-agreement" data-tracking-control-name="article_reader_footer_footer-user-agreement" data-tracking-will-navigate="" class="li-footer__item-link">User Agreement</a></li><li class="li-footer__item"><a href="https://www.linkedin.com/legal/privacy-policy?trk=article_reader_footer_footer-privacy-policy" data-tracking-control-name="article_reader_footer_footer-privacy-policy" data-tracking-will-navigate="" class="li-footer__item-link">Privacy Policy</a></li><li class="li-footer__item"><a href="https://www.linkedin.com/legal/cookie-policy?trk=article_reader_footer_footer-cookie-policy" data-tracking-control-name="article_reader_footer_footer-cookie-policy" data-tracking-will-navigate="" class="li-footer__item-link">Cookie Policy</a></li><li class="li-footer__item"><a href="https://www.linkedin.com/legal/copyright-policy?trk=article_reader_footer_footer-copyright-policy" data-tracking-control-name="article_reader_footer_footer-copyright-policy" data-tracking-will-navigate="" class="li-footer__item-link">Copyright Policy</a></li><li class="li-footer__item"><a href="https://brand.linkedin.com/policies?trk=article_reader_footer_footer-brand-policy" data-tracking-control-name="article_reader_footer_footer-brand-policy" data-tracking-will-navigate="" class="li-footer__item-link">Brand Policy</a></li><li class="li-footer__item"><a href="https://www.linkedin.com/psettings/guest-controls?trk=article_reader_footer_footer-guest-controls" data-tracking-control-name="article_reader_footer_footer-guest-controls" data-tracking-will-navigate="" class="li-footer__item-link">Guest Controls</a></li><li class="li-footer__item"><a href="https://www.linkedin.com/legal/professional-community-policies?trk=article_reader_footer_footer-community-guide" data-tracking-control-name="article_reader_footer_footer-community-guide" data-tracking-will-navigate="" class="li-footer__item-link">Community Guidelines</a></li><li class="li-footer__item"><div class="collapsible-dropdown language-selector collapsible-dropdown--footer language-selector--footer collapsible-dropdown--up language-selector--up"><ul class="collapsible-dropdown__list language-selector__list hidden" role="menu" tabindex="-1"><li aria-label="العربية (Arabic)" class="language-selector__item" role="menuitem"><button aria-label="العربية (Arabic)" data-tracking-control-name="language-selector-ar_AE" class="language-selector__link" data-locale="ar_AE" lang="ar_AE">العربية (Arabic)</button></li><li aria-label="Čeština (Czech)" class="language-selector__item" role="menuitem"><button aria-label="Čeština (Czech)" data-tracking-control-name="language-selector-cs_CZ" class="language-selector__link" data-locale="cs_CZ" lang="cs_CZ">Čeština (Czech)</button></li><li aria-label="Dansk (Danish)" class="language-selector__item" role="menuitem"><button aria-label="Dansk (Danish)" data-tracking-control-name="language-selector-da_DK" class="language-selector__link" data-locale="da_DK" lang="da_DK">Dansk (Danish)</button></li><li aria-label="Deutsch (German)" class="language-selector__item" role="menuitem"><button aria-label="Deutsch (German)" data-tracking-control-name="language-selector-de_DE" class="language-selector__link" data-locale="de_DE" lang="de_DE">Deutsch (German)</button></li><li aria-label="English (English) selected" class="language-selector__item" role="menuitem"><button aria-label="English (English) selected" data-tracking-control-name="language-selector-en_US" class="language-selector__link language-selector__link--selected" data-locale="en_US" lang="en_US"><strong>English (English)</strong></button></li><li aria-label="Español (Spanish)" class="language-selector__item" role="menuitem"><button aria-label="Español (Spanish)" data-tracking-control-name="language-selector-es_ES" class="language-selector__link" data-locale="es_ES" lang="es_ES">Español (Spanish)</button></li><li aria-label="Français (French)" class="language-selector__item" role="menuitem"><button aria-label="Français (French)" data-tracking-control-name="language-selector-fr_FR" class="language-selector__link" data-locale="fr_FR" lang="fr_FR">Français (French)</button></li><li aria-label="Bahasa Indonesia (Bahasa Indonesia)" class="language-selector__item" role="menuitem"><button aria-label="Bahasa Indonesia (Bahasa Indonesia)" data-tracking-control-name="language-selector-in_ID" class="language-selector__link" data-locale="in_ID" lang="in_ID">Bahasa Indonesia (Bahasa Indonesia)</button></li><li aria-label="Italiano (Italian)" class="language-selector__item" role="menuitem"><button aria-label="Italiano (Italian)" data-tracking-control-name="language-selector-it_IT" class="language-selector__link" data-locale="it_IT" lang="it_IT">Italiano (Italian)</button></li><li aria-label="日本語 (Japanese)" class="language-selector__item" role="menuitem"><button aria-label="日本語 (Japanese)" data-tracking-control-name="language-selector-ja_JP" class="language-selector__link" data-locale="ja_JP" lang="ja_JP">日本語 (Japanese)</button></li><li aria-label="한국어 (Korean)" class="language-selector__item" role="menuitem"><button aria-label="한국어 (Korean)" data-tracking-control-name="language-selector-ko_KR" class="language-selector__link" data-locale="ko_KR" lang="ko_KR">한국어 (Korean)</button></li><li aria-label="Bahasa Malaysia (Malay)" class="language-selector__item" role="menuitem"><button aria-label="Bahasa Malaysia (Malay)" data-tracking-control-name="language-selector-ms_MY" class="language-selector__link" data-locale="ms_MY" lang="ms_MY">Bahasa Malaysia (Malay)</button></li><li aria-label="Nederlands (Dutch)" class="language-selector__item" role="menuitem"><button aria-label="Nederlands (Dutch)" data-tracking-control-name="language-selector-nl_NL" class="language-selector__link" data-locale="nl_NL" lang="nl_NL">Nederlands (Dutch)</button></li><li aria-label="Norsk (Norwegian)" class="language-selector__item" role="menuitem"><button aria-label="Norsk (Norwegian)" data-tracking-control-name="language-selector-no_NO" class="language-selector__link" data-locale="no_NO" lang="no_NO">Norsk (Norwegian)</button></li><li aria-label="Polski (Polish)" class="language-selector__item" role="menuitem"><button aria-label="Polski (Polish)" data-tracking-control-name="language-selector-pl_PL" class="language-selector__link" data-locale="pl_PL" lang="pl_PL">Polski (Polish)</button></li><li aria-label="Português (Portuguese)" class="language-selector__item" role="menuitem"><button aria-label="Português (Portuguese)" data-tracking-control-name="language-selector-pt_BR" class="language-selector__link" data-locale="pt_BR" lang="pt_BR">Português (Portuguese)</button></li><li aria-label="Română (Romanian)" class="language-selector__item" role="menuitem"><button aria-label="Română (Romanian)" data-tracking-control-name="language-selector-ro_RO" class="language-selector__link" data-locale="ro_RO" lang="ro_RO">Română (Romanian)</button></li><li aria-label="Русский (Russian)" class="language-selector__item" role="menuitem"><button aria-label="Русский (Russian)" data-tracking-control-name="language-selector-ru_RU" class="language-selector__link" data-locale="ru_RU" lang="ru_RU">Русский (Russian)</button></li><li aria-label="Svenska (Swedish)" class="language-selector__item" role="menuitem"><button aria-label="Svenska (Swedish)" data-tracking-control-name="language-selector-sv_SE" class="language-selector__link" data-locale="sv_SE" lang="sv_SE">Svenska (Swedish)</button></li><li aria-label="ภาษาไทย (Thai)" class="language-selector__item" role="menuitem"><button aria-label="ภาษาไทย (Thai)" data-tracking-control-name="language-selector-th_TH" class="language-selector__link" data-locale="th_TH" lang="th_TH">ภาษาไทย (Thai)</button></li><li aria-label="Tagalog (Tagalog)" class="language-selector__item" role="menuitem"><button aria-label="Tagalog (Tagalog)" data-tracking-control-name="language-selector-tl_PH" class="language-selector__link" data-locale="tl_PH" lang="tl_PH">Tagalog (Tagalog)</button></li><li aria-label="Türkçe (Turkish)" class="language-selector__item" role="menuitem"><button aria-label="Türkçe (Turkish)" data-tracking-control-name="language-selector-tr_TR" class="language-selector__link" data-locale="tr_TR" lang="tr_TR">Türkçe (Turkish)</button></li><li aria-label="简体中文 (Chinese (Simplified))" class="language-selector__item" role="menuitem"><button aria-label="简体中文 (Chinese (Simplified))" data-tracking-control-name="language-selector-zh_CN" class="language-selector__link" data-locale="zh_CN" lang="zh_CN">简体中文 (Chinese (Simplified))</button></li><li aria-label="正體中文 (Chinese (Traditional))" class="language-selector__item" role="menuitem"><button aria-label="正體中文 (Chinese (Traditional))" data-tracking-control-name="language-selector-zh_TW" class="language-selector__link" data-locale="zh_TW" lang="zh_TW">正體中文 (Chinese (Traditional))</button></li></ul><button class="language-selector__button" aria-expanded="false" data-tracking-control-name="footer-lang-dropdown_trigger"><span class="language-selector__label-text">Language</span><icon class="language-selector__label-chevron" data-delayed-url="https://static-exp1.licdn.com/sc/h/cyolgscd0imw2ldqppkrb84vo"></icon></button></div></li></ul></footer><code id="article" style="display: none;"><!--{"author":{"username":"jkregenstein","twitterHandle":null,"articleCount":43,"profilePicture":"","authorId":22135369,"miniProfile":{"headline":"Head of Data and Quantamental Research at Truist Securities","followUrl":null,"numFollowers":1219,"articlesUrl":null,"url":"https://www.linkedin.com/in/jkregenstein","numConnections":5963,"influencer":false,"lastName":"Regenstein","firstName":"Jonathan","numPosts":null,"backgroundImageUrl":null,"postsUrl":null,"imageUrl":null,"numArticles":null}},"series":null,"permalink":"transform-daily-prices-monthly-log-returns-jonathan-regenstein","articleImage":{"caption":"Where we're headed: vis of monthly log returns","imageUrl":"https://media-exp1.licdn.com/dms/image/C5112AQGvOh4uUOdyGA/article-cover_image-shrink_600_2000/0/1520103027263?e=1622073600&v=beta&t=MlAp9mBNwZSvEMcDd-VB3mnbm8P70URxAZr3nKwlykg","imageHeight":400,"imageWidth":744},"linkedInArticleUrn":"urn:li:linkedInArticle:6318298369575919616","description":"Today, we go back a bit, back to where we probably should have started in the first place, but it wouldn’t have been as much fun. In our previous work on volatility, we zipped through the steps of importing data and transforming to monthly returns.","articleUrl":"/pulse/transform-daily-prices-monthly-log-returns-jonathan-regenstein","lastModifiedDate":1520561157000,"locale":"en","caption":"Where we're headed: vis of monthly log returns","articleUrn":"urn:li:article:7868891355894256449","publishedDate":1506428694000,"content":"\u003cp\u003eToday, we go back a bit, back to where we probably should have started in the first place, but it wouldn’t have been as much fun. In our previous work on&nbsp;\u003ca href=\"http://www.reproduciblefinance.com/2017/07/12/introduction-to-volatility/\" target=\"_blank\" rel=\"nofollow noopener\"\u003evolatility\u003c/a\u003e, we zipped through the steps of importing data and transforming to monthly returns. If you’re familiar with Garrett and Hadley’s data science paradigm pictured below, we skimmed through the data import, tidying and transformation steps so that we could look at volatility.\u003c/p\u003e \n  \u003cdiv class=\"slate-resizable-image-embed slate-image-embed__resize-middle\" data-image-href=\"http://r4ds.had.co.nz\"\u003e \n   \u003ca href=\"http://r4ds.had.co.nz\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg data-media-urn=\"\" data-li-src=\"https://media-exp1.licdn.com/dms/image/C5112AQEEnZJaD9p84A/article-inline_image-shrink_1500_2232/0/1520241953292?e=1622073600&amp;v=beta&amp;t=ToCpFQz6-I0KSyxypoCL3GgDSJkZuES3iUzNbrKqRG8\" src=\"//:0\"\u003e\u003c/a\u003e \n  \u003c/div\u003e \n  \u003cp\u003e -Garrett and Hadley’s data science paradigm from \u003ca href=\"http://r4ds.had.co.nz\" target=\"_blank\" rel=\"nofollow noopener\"\u003eR For Datascience\u003c/a\u003e\u003c/p\u003e \n  \u003cp\u003eLet’s correct that oversight and do some spade work on transforming daily prices to monthly log returns. To map back to the paradigm, grabbing the daily prices is our data import, and putting to log monthly returns is our tidying and transforming.\u003c/p\u003e \n  \u003cp\u003eWe will use a few packages and for completeness, we will cover several paths to getting our desired end result. Obviously it’s not necessary to utilize all of our paths here. The intention is to show several methods so that the best one can be chosen for a given challenge or project.\u003c/p\u003e \n  \u003cp\u003eLet’s load up our packages.\u003c/p\u003e \n  \u003cpre spellcheck=\"false\"\u003elibrary(tidyverse)\nlibrary(tidyquant)\nlibrary(timetk)\nlibrary(tibbletime)\n\u003c/pre\u003e \n  \u003cp\u003eWe are building toward analyzing the returns of a 5-asset portfolio consisting of the following.\u003c/p\u003e \n  \u003cpre spellcheck=\"false\"\u003e\u003cspan class=\"hljs-bullet\"\u003e+ \u003c/span\u003eSPY (S&amp;P500 fund) weighted 25%\n\u003cspan class=\"hljs-bullet\"\u003e+ \u003c/span\u003eEFA (a non-US equities fund) weighted 25%\n\u003cspan class=\"hljs-bullet\"\u003e+ \u003c/span\u003eIJS (a small-cap value fund) weighted 20%\n\u003cspan class=\"hljs-bullet\"\u003e+ \u003c/span\u003eEEM (an emerging-mkts fund) weighted 20%\n\u003cspan class=\"hljs-bullet\"\u003e+ \u003c/span\u003eAGG (a bond fund) weighted 10%\n\u003c/pre\u003e \n  \u003cp\u003eI chose those 5 assets because they seem to offer a balanced blend of large, small, international, emerging and bond exposure. We will eventually build a Shiny app to let users choose different assets and see different results. Today, we are just going to work with the individual prices/returns of those 5 assets.\u003c/p\u003e \n  \u003ch3\u003eImporting the data\u003c/h3\u003e \n  \u003cp\u003eOn to step 1, wherein we import adjusted prices for the 5 ETFs to be used in our portfolio and save them to an&nbsp;xts&nbsp;object called&nbsp;prices.\u003c/p\u003e \n  \u003cp\u003eWe need a vector of ticker symbols that we will then pass to Yahoo! Finance via the&nbsp;getSymbols&nbsp;function from the&nbsp;quantmodpackage. This will return an object with the opening price, closing price, adjusted price, daily high, daily low and daily volume. We don’t want to work with all of those, though. The adjusted price is what we need.\u003c/p\u003e \n  \u003cp\u003eTo isolate the adjusted price, we use the&nbsp;map&nbsp;function from the&nbsp;purrr&nbsp;package and apply&nbsp;Ad(get(.))&nbsp;to the imported prices. This will ‘get’ the adjusted price from each of our individual price objects. We could stop here and have the right substance, but the format wouldn’t be great as we would have a&nbsp;list&nbsp;of 5 adjusted prices. The&nbsp;map&nbsp;function returns a list by default but I find them to be unwieldy.\u003c/p\u003e \n  \u003cp\u003eThe&nbsp;reduce(merge)&nbsp;function will allow us to merge the lists into one object and coerce back to an&nbsp;xts&nbsp;structure. Finally, we want intuitive column names and use&nbsp;colnames&lt;-&nbsp;to rename the columns. The&nbsp;rename&nbsp;function from&nbsp;dplyr&nbsp;will not work well here because the object structure is still&nbsp;xts.\u003c/p\u003e \n  \u003cpre spellcheck=\"false\"\u003e\u003cspan class=\"hljs-comment\"\u003e# The symbols vector holds our tickers. \u003c/span\u003e\nsymbols &lt;- c(\u003cspan class=\"hljs-string\"\u003e\"SPY\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"EFA\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"IJS\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"EEM\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"AGG\"\u003c/span\u003e)\n\n\u003cspan class=\"hljs-comment\"\u003e# The prices object will hold our raw price data throughout this book.\u003c/span\u003e\nprices &lt;- \n  getSymbols(symbols, src = \u003cspan class=\"hljs-string\"\u003e'yahoo'\u003c/span\u003e, from = \u003cspan class=\"hljs-string\"\u003e\"2005-01-01\"\u003c/span\u003e, \n             auto.assign = \u003cspan class=\"hljs-keyword\"\u003eTRUE\u003c/span\u003e, warnings = \u003cspan class=\"hljs-keyword\"\u003eFALSE\u003c/span\u003e) %&gt;% \n  map(~Ad(get(.))) %&gt;% \n  reduce(merge) %&gt;%\n  `colnames&lt;-`(symbols)\n\u003c/pre\u003e \n  \u003ch3\u003eThe XTS World\u003c/h3\u003e \n  \u003cp\u003eWe now have an&nbsp;xts&nbsp;object of the adjusted prices for our 5 assets. Have a quick peek.\u003c/p\u003e \n  \u003cpre spellcheck=\"false\"\u003ehead(prices)\n##                 SPY      EFA      IJS      EEM      AGG\n## 2005-01-03 92.93685 37.27150 50.03791 17.75157 66.82627\n## 2005-01-04 91.80122 36.55700 49.14064 17.20503 66.76101\n## 2005-01-05 91.16773 36.53357 48.22669 16.99442 66.73489\n## 2005-01-06 91.63127 36.53357 48.51465 16.98286 66.78063\n## 2005-01-07 91.49993 36.36959 47.88866 17.01574 66.76101\n## 2005-01-10 91.93256 36.53357 48.30181 17.03707 66.72842\n\u003c/pre\u003e \n  \u003cp\u003eOur first reading is from January 3, 2005 (the first trading day of that year) and we have daily prices. Let’s stay in thextsworld and convert to monthly prices using a call to&nbsp;to.monthly(prices, indexAt = \"last\", OHLC = FALSE)&nbsp;from&nbsp;quantmod. The argument&nbsp;index = \"last\"&nbsp;tells the function whether we want to index to the first day of the month or the last day.\u003c/p\u003e \n  \u003cpre spellcheck=\"false\"\u003eprices_monthly &lt;- to.monthly(prices, indexAt = \u003cspan class=\"hljs-string\"\u003e\"last\"\u003c/span\u003e, OHLC = \u003cspan class=\"hljs-literal\"\u003eFALSE\u003c/span\u003e)\n\nhead(prices_monthly)\n\u003cspan class=\"hljs-meta\"\u003e##                 SPY      EFA      IJS      EEM      AGG\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e## 2005-01-31 91.28361 36.82640 49.17820 17.84311 67.15263\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e## 2005-02-28 93.19177 38.22026 50.60547 19.57072 66.90322\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e## 2005-03-31 91.48705 37.21762 49.41122 18.02263 66.25140\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e## 2005-04-29 89.77301 36.61556 46.88139 17.79779 67.39282\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e## 2005-05-31 92.66592 36.29930 49.76724 18.36033 67.95058\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e## 2005-06-30 92.80633 36.81937 51.71587 19.08906 68.54597\u003c/span\u003e\n\u003c/pre\u003e \n  \u003cp\u003eWe now have an&nbsp;xts&nbsp;object, and we have moved from daily prices to monthly prices.\u003c/p\u003e \n  \u003cp\u003eNow we’ll call&nbsp;Return.calculate(prices_monthly, method = \"log\")&nbsp;to convert to returns and save as an object called&nbsp;assed_returns_xts. Note this will give us log returns by the&nbsp;method = \"log\"&nbsp;argument. We could have used&nbsp;method = \"discrete\"&nbsp;to get simple returns.\u003c/p\u003e \n  \u003cpre spellcheck=\"false\"\u003easset_returns_xts &lt;- na.omit(\u003cspan class=\"hljs-keyword\"\u003eReturn\u003c/span\u003e.calculate(prices_monthly, method = \u003cspan class=\"hljs-string\"\u003e\"log\"\u003c/span\u003e))\n\nhead(asset_returns_xts)\n\u003cspan class=\"hljs-comment\"\u003e##                     SPY          EFA         IJS         EEM          AGG\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e## 2005-02-28  0.020688126  0.037150948  0.02860922  0.09241734 -0.003721035\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e## 2005-03-31 -0.018461970 -0.026583514 -0.02388197 -0.08240681 -0.009790455\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e## 2005-04-29 -0.018913092 -0.016309073 -0.05255675 -0.01255390  0.017081857\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e## 2005-05-31  0.031716351 -0.008674664  0.05973606  0.03111818  0.008242118\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e## 2005-06-30  0.001514103  0.014225362  0.03840786  0.03892299  0.008724056\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e## 2005-07-29  0.037547542  0.029527397  0.05677107  0.07400825 -0.010408874\u003c/span\u003e\n\u003c/pre\u003e \n  \u003cp\u003eFrom a substantive perspective, we could stop right now. Our task has been accomplished: we have imported daily prices, trimmed to adjusted prices, moved to monthly prices and transformed to monthly log returns.\u003c/p\u003e \n  \u003cp\u003eIf we wished to visualize these log returns, we would go straight to&nbsp;highcharter&nbsp;and pass in the various&nbsp;xts&nbsp;series.\u003c/p\u003e \n  \u003cp\u003eFor now, though, let’s take a look at a few more methods.\u003c/p\u003e \n  \u003ch3\u003eThe Tidyverse and Tidyquant World\u003c/h3\u003e \n  \u003cp\u003eWe now take the same raw data, which is the&nbsp;prices&nbsp;object we created upon data import and convert it to monthly returns using 3 alternative methods. We will make use of the&nbsp;dplyr,&nbsp;tidyquant,&nbsp;timetk&nbsp;and&nbsp;tibbletime&nbsp;packages.\u003c/p\u003e \n  \u003cp\u003eFor our first method, we use&nbsp;dplyr&nbsp;and&nbsp;timetk&nbsp;to convert our object from an&nbsp;xts&nbsp;object of prices to a&nbsp;tibble&nbsp;of monthly returns. Once we convert to a&nbsp;tibble&nbsp;the tidyverse is available for all sort of manipulations.\u003c/p\u003e \n  \u003cp\u003eLet’s step through the logic before getting to the code chunk.\u003c/p\u003e \n  \u003cp\u003eIn the piped workflow below, our first step is to use the&nbsp;tk_tbl(preserve_index = TRUE, rename_index = \"date\")&nbsp;function to convert from&nbsp;xts&nbsp;to&nbsp;tibble. The two arguments will convert the&nbsp;xts&nbsp;date index to a date column, and rename it “date”. If we stopped here, we would have a new prices object in&nbsp;tibble&nbsp;format.\u003c/p\u003e \n  \u003cp\u003eNext we turn to&nbsp;dplyr&nbsp;to&nbsp;gather&nbsp;our new data frame into long format and then&nbsp;group_by&nbsp;asset. We have not done any calculations yet, we have just shifted from wide format, to long, tidy format. Notice that when we gathered our data, we renamed one of the columns to&nbsp;returns&nbsp;even though the data are still prices. The next step will explain why we did that.\u003c/p\u003e \n  \u003cp\u003eNext, we want to calculate log returns and add those returns to the data frame. We will use&nbsp;mutate&nbsp;and our own calculation to get log returns:&nbsp;mutate(returns = (log(returns) - log(lag(returns)))). Notice that I am putting our new log returns into the&nbsp;returns&nbsp;column by calling&nbsp;returns = .... This is going to remove the price data and replace it with log returns data. This is the explanation for why, when we called&nbsp;gather&nbsp;in the previous step, we renamed the column to&nbsp;returns. That allows us to simply replace that column with log return data instead of having to create a new column and then delete the price data column.\u003c/p\u003e \n  \u003cp\u003eOur last two steps are to&nbsp;spread&nbsp;the data back to wide format, which makes it easier to compare to the&nbsp;xts&nbsp;object and easier to read, but is not a best practice in the tidyverse. We are going to look at this new object and compare to the&nbsp;xtsobject above, so we will stick with wide format for now.\u003c/p\u003e \n  \u003cp\u003eFinally, we want to reorder the columns to align with the&nbsp;symbols&nbsp;vector. That’s important because when we build a portfolio, we will use that vector to coordinate our different weights.\u003c/p\u003e \n  \u003cpre spellcheck=\"false\"\u003easset_returns_dplyr_byhand &lt;- prices %&gt;% \n  to.monthly(indexAt = \u003cspan class=\"hljs-string\"\u003e\"last\"\u003c/span\u003e, OHLC = FALSE) %&gt;% \n  tk_tbl(preserve_index = TRUE, rename_index = \u003cspan class=\"hljs-string\"\u003e\"date\"\u003c/span\u003e) %&gt;%\n  gather(asset, returns, -date) %&gt;% \n  group_by(asset) %&gt;%  \n  mutate(returns = (\u003cspan class=\"hljs-built_in\"\u003elog\u003c/span\u003e(returns) - \u003cspan class=\"hljs-built_in\"\u003elog\u003c/span\u003e(lag(returns)))) %&gt;%\n  spread(asset, returns) %&gt;% \n  select(date, symbols)\n\u003c/pre\u003e \n  \u003cp\u003eFor our second method in the tidy world, we’ll use the&nbsp;tq_transmute&nbsp;function from&nbsp;tidyquant. Instead of using&nbsp;to.monthlyand&nbsp;mutate, and then supplying our own calculation, we use&nbsp;tq_transmute(mutate_fun = periodReturn, period = \"monthly\", type = \"log\")&nbsp;and go straight from daily prices to monthly log returns. Note that we select the period as ‘monthly’ in that function call, which means we can pass in the raw daily&nbsp;prices&nbsp;xts&nbsp;object..\u003c/p\u003e \n  \u003cpre spellcheck=\"false\"\u003easset_returns_tq_\u003cspan class=\"hljs-built_in\"\u003ebuiltin\u003c/span\u003e &lt;- prices %&gt;%\n  tk_tbl(preserve_index = TRUE, rename_index = \u003cspan class=\"hljs-string\"\u003e\"date\"\u003c/span\u003e) %&gt;%\n  gather(asset, prices, -date) %&gt;% \n  group_by(asset) %&gt;%\n  tq_transmute(mutate_fun = periodReturn, period = \u003cspan class=\"hljs-string\"\u003e\"monthly\"\u003c/span\u003e, \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\"log\"\u003c/span\u003e) %&gt;% \n  spread(asset, monthly.returns) %&gt;% \n  select(date, symbols)\n\u003c/pre\u003e \n  \u003cp\u003eOur third method in the tidy world will produce the same output as the previous two - a&nbsp;tibble&nbsp;of monthly log returns - but we will also introduce the&nbsp;tibbletime&nbsp;package and it’s function&nbsp;as_period. As the name implies, this function allows us to cast the prices time series from daily to monthly (or weekly or quarterly etc.) in our&nbsp;tibble&nbsp;instead of having to apply the&nbsp;to.monthly&nbsp;function to the&nbsp;xts&nbsp;object as we did previously.\u003c/p\u003e \n  \u003cp\u003eFurthermore, unlike the previous code chunk above where we went from daily prices straight to monthly returns, here we go from daily prices to monthly prices to monthly returns. That is, we will first create a&nbsp;tibble&nbsp;of monthly prices, then pipe to create monthly returns.\u003c/p\u003e \n  \u003cp\u003eWe don’t have a substantive reason for doing that here, but it could prove useful if there’s a time when we need to get monthly prices in isolation during a tidyverse-based piped workflow.\u003c/p\u003e \n  \u003cpre spellcheck=\"false\"\u003easset_returns_tbltime &lt;- prices %&gt;% \n  tk_tbl(preserve_index = TRUE, rename_index = \u003cspan class=\"hljs-string\"\u003e\"date\"\u003c/span\u003e) %&gt;%\n  tbl_time(index = \u003cspan class=\"hljs-string\"\u003e\"date\"\u003c/span\u003e) %&gt;% \n  as_period(\u003cspan class=\"hljs-string\"\u003e\"monthly\"\u003c/span\u003e, side = \u003cspan class=\"hljs-string\"\u003e\"end\"\u003c/span\u003e) %&gt;%\n  gather(asset, returns, -date) %&gt;% \n  group_by(asset) %&gt;% \n  tq_transmute(mutate_fun = periodReturn, \u003cspan class=\"hljs-keyword\"\u003etype\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\"log\"\u003c/span\u003e) %&gt;% \n  spread(asset, monthly.returns) %&gt;% \n  \u003cspan class=\"hljs-keyword\"\u003eselect\u003c/span\u003e(date, symbols)\n\u003c/pre\u003e \n  \u003cp\u003eLet’s take a peek at our 4 monthly log return objects.\u003c/p\u003e \n  \u003cpre spellcheck=\"false\"\u003ehead(asset_returns_xts)\n##                     SPY          EFA         IJS         EEM          AGG\n## 2005-02-28  0.020688126  0.037150948  0.02860922  0.09241734 -0.003721035\n## 2005-03-31 -0.018461970 -0.026583514 -0.02388197 -0.08240681 -0.009790455\n## 2005-04-29 -0.018913092 -0.016309073 -0.05255675 -0.01255390  0.017081857\n## 2005-05-31  0.031716351 -0.008674664  0.05973606  0.03111818  0.008242118\n## 2005-06-30  0.001514103  0.014225362  0.03840786  0.03892299  0.008724056\n## 2005-07-29  0.037547542  0.029527397  0.05677107  0.07400825 -0.010408874\n\nhead(asset_returns_dplyr_byhand)\n## # A tibble: 6 x 6\n##         date          SPY          EFA         IJS         EEM\n##       &lt;date&gt;        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;\n## 1 2005-01-31           NA           NA          NA          NA\n## 2 2005-02-28  0.020688126  0.037150948  0.02860922  0.09241734\n## 3 2005-03-31 -0.018461970 -0.026583514 -0.02388197 -0.08240681\n## 4 2005-04-29 -0.018913092 -0.016309073 -0.05255675 -0.01255390\n## 5 2005-05-31  0.031716351 -0.008674664  0.05973606  0.03111818\n## 6 2005-06-30  0.001514103  0.014225362  0.03840786  0.03892299\n## # ... with 1 more variables: AGG &lt;dbl&gt;\n\nhead(asset_returns_tq_builtin)\n## # A tibble: 6 x 6\n##         date          SPY          EFA         IJS          EEM\n##       &lt;date&gt;        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;\n## 1 2005-01-31 -0.017948944 -0.012014062 -0.01733050  0.005143195\n## 2 2005-02-28  0.020688126  0.037150948  0.02860922  0.092417342\n## 3 2005-03-31 -0.018461970 -0.026583514 -0.02388197 -0.082406812\n## 4 2005-04-29 -0.018913092 -0.016309073 -0.05255675 -0.012553902\n## 5 2005-05-31  0.031716351 -0.008674664  0.05973606  0.031118184\n## 6 2005-06-30  0.001514103  0.014225362  0.03840786  0.038922991\n## # ... with 1 more variables: AGG &lt;dbl&gt;\n\nhead(asset_returns_tbltime)\n## # A tibble: 6 x 6\n##         date          SPY          EFA         IJS         EEM\n##       &lt;date&gt;        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;\n## 1 2005-01-31  0.000000000  0.000000000  0.00000000  0.00000000\n## 2 2005-02-28  0.020688126  0.037150948  0.02860922  0.09241734\n## 3 2005-03-31 -0.018461970 -0.026583514 -0.02388197 -0.08240681\n## 4 2005-04-29 -0.018913092 -0.016309073 -0.05255675 -0.01255390\n## 5 2005-05-31  0.031716351 -0.008674664  0.05973606  0.03111818\n## 6 2005-06-30  0.001514103  0.014225362  0.03840786  0.03892299\n## # ... with 1 more variables: AGG &lt;dbl&gt;\n\u003c/pre\u003e \n  \u003cp\u003eFirst, have a look at the left most column in each object, where the date is stored. The&nbsp;asset_returns_xts&nbsp;has a date index, not a column. It is accessed via&nbsp;index(asset_returns_xts). The data frame objects have a column called “date”, accessed via the&nbsp;$date&nbsp;convention, e.g.&nbsp;asset_returns_dplyr_byhand$date.\u003c/p\u003e \n  \u003cp\u003eSecond, notice the first observation in each of the objects. Only&nbsp;asset_returns_tqtbl&nbsp;has an observation for January of 2005. The other 3 elided January of 2005 when we cast from daily to monthly. Do we care? Does it matter to our final calculations? Perhaps and probably. Either way, we need to be aware of the consequences of taking our raw data and reshaping it via different methods.\u003c/p\u003e \n  \u003cp\u003eThird, each of these objects is in “wide” format, which in this case means there is a column for each of our assets. When we called&nbsp;spread&nbsp;at the end of the piped code flow, we put the data frames back to wide format.\u003c/p\u003e \n  \u003cp\u003eThis is the format that&nbsp;xts&nbsp;likes and it’s the format that is easier to read as a human. However, the tidyverse wants this data to be in long or tidy format so that each variable has its own column. For our asset_returns objects, that would mean a column called “date”, a column called “asset” and a column called “returns”. To see that in action, here is how it looks.\u003c/p\u003e \n  \u003cpre spellcheck=\"false\"\u003easset_returns_long_format &lt;- \n  asset_returns_dplyr_byhand %&gt;% \n  gather(asset, returns, -date)\n\nhead(asset_returns_long_format)\n\u003cspan class=\"hljs-meta\"\u003e## # A tibble: 6 x 3\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e##         date asset      returns\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e##       &lt;date&gt; &lt;chr&gt;        &lt;dbl&gt;\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e## 1 2005-01-31   SPY           NA\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e## 2 2005-02-28   SPY  0.020688126\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e## 3 2005-03-31   SPY -0.018461970\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e## 4 2005-04-29   SPY -0.018913092\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e## 5 2005-05-31   SPY  0.031716351\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e## 6 2005-06-30   SPY  0.001514103\u003c/span\u003e\n\u003c/pre\u003e \n  \u003cp\u003eWe now have 3 columns and if we want to run an operation like&nbsp;mutate&nbsp;on each asset, we just need to call&nbsp;goup_by(asset)in the piped flow.\u003c/p\u003e \n  \u003cp\u003eBefore we conclude, I would be remiss without calling out an important point that I skipped for the sake of brevity. We transformed daily prices to monthly log returns, but never explained, justified or mentioned why we chose log returns instead of simple returns.\u003c/p\u003e \n  \u003cp\u003eWe are making an assumption that our colleagues, collaborators or clients understand and agree with that decision. Even if they happen to do so, we should explain our transformation as a matter of best practice: justify the logic for data transformations, even if those transformations represent a standard operating procedure. Else, we might have a team that starts to skip the logic when the data transformations are a bit more non-standard, or even controversial. Since we might perform this prices to log returns in several projects, we could simply have one&nbsp;\u003ca href=\"http://rmarkdown.rstudio.com/r_notebooks.html\" target=\"_blank\" rel=\"nofollow noopener\"\u003eR Notebook\u003c/a\u003e&nbsp;that our team references to explain why we use log returns. Over time, we can build a repository of documents that explain the theory behind our data tidying and transformation practices.\u003c/p\u003e \n  \u003cp\u003eThat’s all for today. Next time we will visualize these individual asset returns (and will notice that our log returns have a normal distribution, which will be important when we run simulations) before combining them into portfolio returns based on the different weightings. Thanks and see you next time.\u003c/p\u003e \n  \u003ch3\u003e\u003cbr\u003e\u003c/h3\u003e\n \n","socialActivityCounts":{"numLikes":32,"numComments":4,"numShares":0,"threadHasAction":false},"title":"Transform Daily Prices to Monthly Log Returns","ugcPost":null,"comments":{"paging":{"total":0,"start":0,"count":5},"commentingDisabled":false,"elements":[{"commenter":{"headline":"Data Scientist","followUrl":null,"numFollowers":null,"articlesUrl":null,"url":"https://ir.linkedin.com/in/mohammad-gavahi-53a18280","numConnections":null,"influencer":false,"lastName":"Gavahi","firstName":"MohammaD","numPosts":null,"backgroundImageUrl":null,"postsUrl":null,"imageUrl":"https://media-exp1.licdn.com/dms/image/C4E03AQFerrZCNzrwxA/profile-displayphoto-shrink_100_100/0/1516813663437?e=1622073600&v=beta&t=zTuk4v8k0nIjenX3bvqzaL1Z2HVahMzD3nC__7dRAsk","numArticles":null},"parentCommentUrn":null,"totalLikes":0,"commentUrn":"urn:li:comment:(article:7868891355894256449,6780166816258957312)","aggregatedTotalLikes":null,"id":"6780166816258957312","likers":null,"totalFirstLevelComments":0,"parentCommentId":null,"message":"hi, if want to change the date of yearly return, how can do it?\nfor example in function use 01-01-2000 for start get date and I want to start date from 01-08-2000.","edited":false,"nestedComments":[],"threadId":"comment:(article:7868891355894256449,6780166816258957312)","createdDate":1616517738406},{"commenter":{"headline":"Business Intelligence & Analytics Lead | Data Science | Data Engineering","followUrl":null,"numFollowers":null,"articlesUrl":null,"url":"https://zm.linkedin.com/in/aaronsimumba","numConnections":null,"influencer":false,"lastName":"Simumba ","firstName":"Aaron","numPosts":null,"backgroundImageUrl":null,"postsUrl":null,"imageUrl":"https://media-exp1.licdn.com/dms/image/C4D03AQGlg5tWxBp9sA/profile-displayphoto-shrink_100_100/0/1557935124994?e=1622073600&v=beta&t=5NHEdiGyit1v7gdG9QimsjA2QmkB38z3BkevBNLYatY","numArticles":null},"parentCommentUrn":null,"totalLikes":0,"commentUrn":"urn:li:comment:(article:7868891355894256449,6318767647613820928)","aggregatedTotalLikes":null,"id":"6318767647613820928","likers":null,"totalFirstLevelComments":1,"parentCommentId":null,"message":"Great write up as always. I have been following keenly you writings. Learning something new every time. Kindly rectify a few typos in the post. If it's on github I can submit a PR.","edited":false,"nestedComments":[{"commenter":{"headline":"Head of Data and Quantamental Research at Truist Securities","followUrl":null,"numFollowers":null,"articlesUrl":null,"url":"https://www.linkedin.com/in/jkregenstein","numConnections":null,"influencer":false,"lastName":"Regenstein","firstName":"Jonathan","numPosts":null,"backgroundImageUrl":null,"postsUrl":null,"imageUrl":null,"numArticles":null},"parentCommentUrn":null,"totalLikes":0,"commentUrn":"urn:li:comment:(article:7868891355894256449,6324060356566093824)","aggregatedTotalLikes":null,"id":"6324060356566093824","likers":null,"totalFirstLevelComments":0,"parentCommentId":null,"message":"Thanks, Aaron. Any R/code typos, feel free to direct message me or paste them in the comments. I will edit accordingly! ","edited":false,"nestedComments":null,"threadId":"comment:(article:7868891355894256449,6324060356566093824)","createdDate":1507773484425}],"threadId":"comment:(article:7868891355894256449,6318767647613820928)","createdDate":1506511604219},{"commenter":{"headline":"2000+ students | Learning Data Science for Business | R & Python Instructor","followUrl":null,"numFollowers":null,"articlesUrl":null,"url":"https://www.linkedin.com/in/mattdancho","numConnections":null,"influencer":false,"lastName":"Dancho","firstName":"Matt","numPosts":null,"backgroundImageUrl":null,"postsUrl":null,"imageUrl":"https://media-exp1.licdn.com/dms/image/C4E03AQHQD-hENF6Lzg/profile-displayphoto-shrink_100_100/0/1516781160459?e=1622073600&v=beta&t=tM2Ch9K366a9SOPPeBWmqtI54KOGR7ruzqQSlOHWKnw","numArticles":null},"parentCommentUrn":null,"totalLikes":0,"commentUrn":"urn:li:comment:(article:7868891355894256449,6318596084277084160)","aggregatedTotalLikes":null,"id":"6318596084277084160","likers":null,"totalFirstLevelComments":0,"parentCommentId":null,"message":"Great article Jonathan Regenstein! Getting returns used to be a pain in the butt! Interesting how each of the methods get the same result. Nice work.","edited":false,"nestedComments":[],"threadId":"comment:(article:7868891355894256449,6318596084277084160)","createdDate":1506470700331}]}}--></code><script data-module-id="google-one-tap-lib" src="./Transform Daily Prices to Monthly Log Returns_files/5g6kvbdyxoays49e1fd9slioa" class="lazy-loaded"></script><script src="./Transform Daily Prices to Monthly Log Returns_files/58ikgnh04in2ngtxjdu5jjic1" async="" gapi_processed="true"></script></body></html>